<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="è‡ªç”¨">
<title>Vue3å¿«é€Ÿä¸Šæ‰‹</title>

<link rel='canonical' href='https://IAmYuanyu.github.io/p/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="Vue3å¿«é€Ÿä¸Šæ‰‹">
<meta property='og:description' content="è‡ªç”¨">
<meta property='og:url' content='https://IAmYuanyu.github.io/p/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/'>
<meta property='og:site_name' content='ç¼˜é±¼'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-03-27T13:52:16&#43;08:00'/><meta property='article:modified_time' content='2024-03-27T13:52:16&#43;08:00'/>
<meta name="twitter:title" content="Vue3å¿«é€Ÿä¸Šæ‰‹">
<meta name="twitter:description" content="è‡ªç”¨">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_1e2eadef835e950a.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ˜‡</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ç¼˜é±¼</a></h1>
            <h2 class="site-description">ç¼˜é±¼çš„åšå®¢</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>æ¡£æ¡ˆ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#1-vue3ç®€ä»‹">1. Vue3ç®€ä»‹</a>
      <ol>
        <li><a href="#11-æ€§èƒ½çš„æå‡">1.1. ã€æ€§èƒ½çš„æå‡ã€‘</a></li>
        <li><a href="#12-æºç çš„å‡çº§">1.2.ã€ æºç çš„å‡çº§ã€‘</a></li>
        <li><a href="#13-æ‹¥æŠ±typescript">1.3. ã€æ‹¥æŠ±TypeScriptã€‘</a></li>
        <li><a href="#14-æ–°çš„ç‰¹æ€§">1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</a></li>
      </ol>
    </li>
    <li><a href="#2-åˆ›å»ºvue3å·¥ç¨‹">2. åˆ›å»ºVue3å·¥ç¨‹</a>
      <ol>
        <li><a href="#21-åŸºäº-vue-cli-åˆ›å»º">2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</a></li>
        <li><a href="#22-åŸºäº-vite-åˆ›å»ºæ¨è">2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</a>
          <ol>
            <li><a href="#221-å®‰è£…ä¾èµ–">2.2.1. å®‰è£…ä¾èµ–</a></li>
            <li><a href="#222-å¦‚ä½•è¿è¡Œ">2.2.2. å¦‚ä½•è¿è¡Œ</a></li>
            <li><a href="#223-å¦‚ä½•åœæ­¢è¿è¡Œ">2.2.3. å¦‚ä½•åœæ­¢è¿è¡Œ</a></li>
          </ol>
        </li>
        <li><a href="#23-ä¸€ä¸ªç®€å•çš„æ•ˆæœ">2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</a></li>
      </ol>
    </li>
    <li><a href="#3-vue3æ ¸å¿ƒè¯­æ³•">3. Vue3æ ¸å¿ƒè¯­æ³•</a>
      <ol>
        <li><a href="#31--optionsapi-ä¸-compositionapi">3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</a>
          <ol>
            <li><a href="#options-api-çš„å¼Šç«¯">Options API çš„å¼Šç«¯</a></li>
            <li><a href="#composition-api-çš„ä¼˜åŠ¿">Composition API çš„ä¼˜åŠ¿</a></li>
          </ol>
        </li>
        <li><a href="#32-æ‹‰å¼€åºå¹•çš„-setup">3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</a>
          <ol>
            <li><a href="#setup-æ¦‚è¿°">setup æ¦‚è¿°</a></li>
            <li><a href="#setup-çš„è¿”å›å€¼">setup çš„è¿”å›å€¼</a></li>
            <li><a href="#setup-ä¸-options-api-çš„å…³ç³»">setup ä¸ Options API çš„å…³ç³»</a></li>
            <li><a href="#setup-è¯­æ³•ç³–">setup è¯­æ³•ç³–</a></li>
          </ol>
        </li>
        <li><a href="#33-ref-åˆ›å»ºåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®">3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</a></li>
        <li><a href="#34-reactive-åˆ›å»ºå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®">3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</a></li>
        <li><a href="#35-ref-åˆ›å»ºå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®">3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</a></li>
        <li><a href="#36-ref-å¯¹æ¯”-reactive">3.6. ã€ref å¯¹æ¯” reactiveã€‘</a></li>
        <li><a href="#37-torefs-ä¸-toref">3.7. ã€toRefs ä¸ toRefã€‘</a></li>
        <li><a href="#38-computed">3.8. ã€computedã€‘</a></li>
        <li><a href="#39watch">3.9.ã€watchã€‘</a>
          <ol>
            <li><a href="#-æƒ…å†µä¸€">* æƒ…å†µä¸€</a></li>
            <li><a href="#-æƒ…å†µäºŒ">* æƒ…å†µäºŒ</a></li>
            <li><a href="#--æƒ…å†µä¸‰">*  æƒ…å†µä¸‰</a></li>
            <li><a href="#-æƒ…å†µå››">* æƒ…å†µå››</a></li>
            <li><a href="#-æƒ…å†µäº”">* æƒ…å†µäº”</a></li>
          </ol>
        </li>
        <li><a href="#310-watcheffect">3.10. ã€watchEffectã€‘</a></li>
        <li><a href="#311-æ ‡ç­¾çš„-ref-å±æ€§">3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</a></li>
        <li><a href="#312-props">3.12. ã€propsã€‘</a></li>
        <li><a href="#313-ç”Ÿå‘½å‘¨æœŸ">3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</a></li>
        <li><a href="#314-è‡ªå®šä¹‰hook">3.14. ã€è‡ªå®šä¹‰hookã€‘</a></li>
      </ol>
    </li>
    <li><a href="#4-è·¯ç”±">4. è·¯ç”±</a>
      <ol>
        <li><a href="#41-å¯¹è·¯ç”±çš„ç†è§£">4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</a></li>
        <li><a href="#42-åŸºæœ¬åˆ‡æ¢æ•ˆæœ">4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</a></li>
        <li><a href="#43-ä¸¤ä¸ªæ³¨æ„ç‚¹">4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</a></li>
        <li><a href="#44è·¯ç”±å™¨å·¥ä½œæ¨¡å¼">4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</a></li>
        <li><a href="#45-toçš„ä¸¤ç§å†™æ³•">4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</a></li>
        <li><a href="#46-å‘½åè·¯ç”±">4.6. ã€å‘½åè·¯ç”±ã€‘</a></li>
        <li><a href="#47-åµŒå¥—è·¯ç”±">4.7. ã€åµŒå¥—è·¯ç”±ã€‘</a></li>
        <li><a href="#48-è·¯ç”±ä¼ å‚">4.8. ã€è·¯ç”±ä¼ å‚ã€‘</a>
          <ol>
            <li><a href="#queryå‚æ•°">queryå‚æ•°</a></li>
            <li><a href="#paramså‚æ•°">paramså‚æ•°</a></li>
          </ol>
        </li>
        <li><a href="#49-è·¯ç”±çš„propsé…ç½®">4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</a></li>
        <li><a href="#410--replaceå±æ€§">4.10. ã€ replaceå±æ€§ã€‘</a></li>
        <li><a href="#411-ç¼–ç¨‹å¼å¯¼èˆª">4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</a></li>
        <li><a href="#412-é‡å®šå‘">4.12. ã€é‡å®šå‘ã€‘</a></li>
      </ol>
    </li>
    <li><a href="#5-pinia">5. pinia</a>
      <ol>
        <li><a href="#51å‡†å¤‡ä¸€ä¸ªæ•ˆæœ">5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</a></li>
        <li><a href="#52æ­å»º-pinia-ç¯å¢ƒ">5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</a></li>
        <li><a href="#53å­˜å‚¨è¯»å–æ•°æ®">5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</a></li>
        <li><a href="#54ä¿®æ”¹æ•°æ®ä¸‰ç§æ–¹å¼">5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</a></li>
        <li><a href="#55storetorefs">5.5.ã€storeToRefsã€‘</a></li>
        <li><a href="#56getters">5.6.ã€gettersã€‘</a></li>
        <li><a href="#57subscribe">5.7.ã€$subscribeã€‘</a></li>
        <li><a href="#58-storeç»„åˆå¼å†™æ³•">5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</a></li>
      </ol>
    </li>
    <li><a href="#6-ç»„ä»¶é€šä¿¡">6. ç»„ä»¶é€šä¿¡</a>
      <ol>
        <li><a href="#61-props">6.1. ã€propsã€‘</a></li>
        <li><a href="#62-è‡ªå®šä¹‰äº‹ä»¶">6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</a></li>
        <li><a href="#63-mitt">6.3. ã€mittã€‘</a></li>
        <li><a href="#64v-model">6.4.ã€v-modelã€‘</a></li>
        <li><a href="#65attrs-">6.5.ã€$attrs ã€‘</a></li>
        <li><a href="#66-refsparent">6.6. ã€$refsã€$parentã€‘</a></li>
        <li><a href="#67-provideinject">6.7. ã€provideã€injectã€‘</a></li>
        <li><a href="#68-pinia">6.8. ã€piniaã€‘</a></li>
        <li><a href="#69-slot">6.9. ã€slotã€‘</a>
          <ol>
            <li><a href="#1-é»˜è®¤æ’æ§½">1. é»˜è®¤æ’æ§½</a></li>
            <li><a href="#2-å…·åæ’æ§½">2. å…·åæ’æ§½</a></li>
            <li><a href="#3-ä½œç”¨åŸŸæ’æ§½">3. ä½œç”¨åŸŸæ’æ§½</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#7-å…¶å®ƒ-api">7. å…¶å®ƒ API</a>
      <ol>
        <li><a href="#71shallowref-ä¸-shallowreactive-">7.1.ã€shallowRef ä¸ shallowReactive ã€‘</a>
          <ol>
            <li><a href="#shallowref"><code>shallowRef</code></a></li>
            <li><a href="#shallowreactive"><code>shallowReactive</code></a></li>
            <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
            <li><a href="#æ³¨æ„">æ³¨æ„</a></li>
          </ol>
        </li>
        <li><a href="#72readonly-ä¸-shallowreadonly">7.2.ã€readonly ä¸ shallowReadonlyã€‘</a>
          <ol>
            <li><a href="#readonly"><strong><code>readonly</code></strong></a></li>
            <li><a href="#shallowreadonly"><strong><code>shallowReadonly</code></strong></a></li>
          </ol>
        </li>
        <li><a href="#73toraw-ä¸-markraw">7.3.ã€toRaw ä¸ markRawã€‘</a>
          <ol>
            <li><a href="#toraw"><code>toRaw</code></a></li>
            <li><a href="#markraw"><code>markRaw</code></a></li>
          </ol>
        </li>
        <li><a href="#74customref">7.4.ã€customRefã€‘</a></li>
      </ol>
    </li>
    <li><a href="#8-vue3æ–°ç»„ä»¶">8. Vue3æ–°ç»„ä»¶</a>
      <ol>
        <li><a href="#81-teleport">8.1. ã€Teleportã€‘</a></li>
        <li><a href="#82-suspense">8.2. ã€Suspenseã€‘</a></li>
        <li><a href="#83å…¨å±€apiè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡">8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</a></li>
        <li><a href="#84å…¶ä»–vue3çš„éå…¼å®¹æ€§æ”¹å˜">8.4.ã€å…¶ä»–ï¼ˆVue3çš„éå…¼å®¹æ€§æ”¹å˜ï¼‰ã€‘</a></li>
      </ol>
    </li>
    <li><a href="#9-element-plus">9. Element Plus</a>
      <ol>
        <li><a href="#91-å®‰è£…ä¸å¯¼å…¥">9.1. å®‰è£…ä¸å¯¼å…¥</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%95%99%E7%A8%8B/" >
                æ•™ç¨‹
            </a>
        
            <a href="/categories/vue3/" >
                Vue3
            </a>
        
            <a href="/categories/%E4%BD%9C%E8%80%85%E8%87%AA%E7%94%A8/" >
                ä½œè€…è‡ªç”¨
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/">Vue3å¿«é€Ÿä¸Šæ‰‹</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            è‡ªç”¨
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-03-27</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="1-vue3ç®€ä»‹">1. Vue3ç®€ä»‹
</h2><ul>
<li>
<p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p>
</li>
<li>
<p>ç»å†äº†ï¼š<a class="link" href="https://github.com/vuejs/core/commits/main"  target="_blank" rel="noopener"
    >4800+æ¬¡æäº¤</a>ã€<a class="link" href="https://github.com/vuejs/rfcs/tree/master/active-rfcs"  target="_blank" rel="noopener"
    >40+ä¸ªRFC</a>ã€<a class="link" href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr&#43;is%3Amerged&#43;-author%3Aapp%2Fdependabot-preview&#43;"  target="_blank" rel="noopener"
    >600+æ¬¡PR</a>ã€<a class="link" href="https://github.com/vuejs/core/graphs/contributors"  target="_blank" rel="noopener"
    >300+è´¡çŒ®è€…</a></p>
</li>
<li>
<p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a class="link" href="https://github.com/vuejs/core/releases/tag/v3.0.0"  target="_blank" rel="noopener"
    >Release v3.0.0 One Piece Â· vuejs/core</a></p>
</li>
<li>
<p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p>
<img src="/assets/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /> 
</li>
</ul>
<h3 id="11-æ€§èƒ½çš„æå‡">1.1. ã€æ€§èƒ½çš„æå‡ã€‘
</h3><ul>
<li>
<p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p>
</li>
<li>
<p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p>
</li>
<li>
<p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p>
</li>
</ul>
<h3 id="12-æºç çš„å‡çº§">1.2.ã€ æºç çš„å‡çº§ã€‘
</h3><ul>
<li>
<p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p>
</li>
<li>
<p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p>
</li>
</ul>
<h3 id="13-æ‹¥æŠ±typescript">1.3. ã€æ‹¥æŠ±TypeScriptã€‘
</h3><ul>
<li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li>
</ul>
<h3 id="14-æ–°çš„ç‰¹æ€§">1.4. ã€æ–°çš„ç‰¹æ€§ã€‘
</h3><ol>
<li>
<p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p>
<ul>
<li>
<p><code>setup</code></p>
</li>
<li>
<p><code>ref</code>ä¸<code>reactive</code></p>
</li>
<li>
<p><code>computed</code>ä¸<code>watch</code></p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
<li>
<p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p>
<ul>
<li>
<p><code>Fragment</code></p>
</li>
<li>
<p><code>Teleport</code></p>
</li>
<li>
<p><code>Suspense</code></p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
<li>
<p>å…¶ä»–æ”¹å˜ï¼š</p>
<ul>
<li>
<p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p>
</li>
<li>
<p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p>
</li>
<li>
<p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
</ol>
<h2 id="2-åˆ›å»ºvue3å·¥ç¨‹">2. åˆ›å»ºVue3å·¥ç¨‹
</h2><h3 id="21-åŸºäº-vue-cli-åˆ›å»º">2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘
</h3><p>ç‚¹å‡»æŸ¥çœ‹<a class="link" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create"  target="_blank" rel="noopener"
    >å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c">### æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span>
</span></span><span class="line"><span class="cl"><span class="n">vue</span> <span class="p">-</span><span class="n">-version</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">### å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span>
</span></span><span class="line"><span class="cl"><span class="n">npm</span> <span class="n">install</span> <span class="n">-g</span> <span class="nv">@vue</span><span class="p">/</span><span class="nb">cli
</span></span></span><span class="line"><span class="cl"><span class="nb"></span>
</span></span><span class="line"><span class="cl"><span class="c">### æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span>
</span></span><span class="line"><span class="cl"><span class="n">vue</span> <span class="n">create</span> <span class="n">vue_test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">###  éšåé€‰æ‹©3.x</span>
</span></span><span class="line"><span class="cl"><span class="c">###  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span>
</span></span><span class="line"><span class="cl"><span class="c">###  &gt; 3.x</span>
</span></span><span class="line"><span class="cl"><span class="c">###    2.x</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">### å¯åŠ¨</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd </span><span class="n">vue_test</span>
</span></span><span class="line"><span class="cl"><span class="n">npm</span> <span class="n">run</span> <span class="n">serve</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="22-åŸºäº-vite-åˆ›å»ºæ¨è">2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)
</h3><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a class="link" href="https://vitejs.cn/"  target="_blank" rel="noopener"
    >https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ul>
<li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li>
<li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li>
<li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li>
<li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š</li>
<li><img src="/assets/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black" />	<img src="/assets/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black" /></li>
</ul>
<ul>
<li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a class="link" href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application"  target="_blank" rel="noopener"
    >å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c">### 1.åˆ›å»ºå‘½ä»¤</span>
</span></span><span class="line"><span class="cl"><span class="n">npm</span> <span class="n">create</span> <span class="n">vue</span><span class="nv">@latest</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">### 2.å…·ä½“é…ç½®</span>
</span></span><span class="line"><span class="cl"><span class="c">### é…ç½®é¡¹ç›®åç§°</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Project</span> <span class="n">name</span><span class="err">:</span> <span class="n">vue3_test</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">TypeScript</span><span class="p">?</span>  <span class="n">Yes</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">JSX</span> <span class="n">Support</span><span class="p">?</span>  <span class="n">No</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">Vue</span> <span class="n">Router</span> <span class="k">for</span> <span class="n">Single</span> <span class="n">Page</span> <span class="n">Application</span> <span class="n">development</span><span class="p">?</span>  <span class="n">No</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">Pinia</span> <span class="k">for</span> <span class="n">state</span> <span class="n">management</span><span class="p">?</span>  <span class="n">No</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">Vitest</span> <span class="k">for</span> <span class="n">Unit</span> <span class="n">Testing</span><span class="p">?</span>  <span class="n">No</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">an</span> <span class="nb">End-to</span><span class="n">-End</span> <span class="n">Testing</span> <span class="n">Solution</span><span class="p">?</span> <span class="err">Â»</span> <span class="n">No</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">ESLint</span> <span class="k">for</span> <span class="n">code</span> <span class="n">quality</span><span class="p">?</span>  <span class="n">Yes</span>
</span></span><span class="line"><span class="cl"><span class="c">### æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span>
</span></span><span class="line"><span class="cl"><span class="err">âˆš</span> <span class="n">Add</span> <span class="n">Prettier</span> <span class="k">for</span> <span class="n">code</span> <span class="n">formatting</span><span class="p">?</span>  <span class="n">No</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="221-å®‰è£…ä¾èµ–">2.2.1. å®‰è£…ä¾èµ–
</h4><p>åˆ›å»ºåç”¨vscodeæ‰“å¼€ï¼Œå‘ç°æœ‰çš„æ–‡ä»¶å†’çº¢ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥<code>npm i</code>å®‰è£…ä¾èµ–åé‡æ–°å¯åŠ¨æ¥è§£å†³</p>
<p><img src="/assets/image-20250219184723761.png"
	
	
	
	loading="lazy"
	
		alt="image-20250219184723761"
	
	
></p>
<p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶ï¼ˆä¸‹é¢å†…å®¹æ˜¯å†™åœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>App.vue</code>ä¸­çš„ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">ä½ å¥½å•Š</span><span class="err">ï¼</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span> <span class="c1">//ç»„ä»¶å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">scopedè¡¨ç¤ºå±€éƒ¨æ ·å¼</span><span class="err">ï¼Œ</span><span class="nx">åªä¼šä¿®æ”¹è¯¥vueæ–‡ä»¶ä¸­çš„å…ƒç´ æ ·å¼</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">app</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ddd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">padding</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p>
<p><img src="/assets/image-20250219184521064.png"
	
	
	
	loading="lazy"
	
		alt="image-20250219184521064"
	
	
></p>
<p>æ€»ç»“ï¼š</p>
<ul>
<li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li>
<li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li>
<li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li>
</ul>
<h4 id="222-å¦‚ä½•è¿è¡Œ">2.2.2. å¦‚ä½•è¿è¡Œ
</h4><p>æŸ¥çœ‹<code>package.json</code>æ–‡ä»¶</p>
<img src="/assets/image-20250219192339879.png" alt="image-20250219192339879" style="zoom:67%;" />
<p>å‘ç°æ˜¯<code>dev</code>ï¼Œåˆ™åœ¨ç»ˆç«¯è¾“å…¥<code>npm run dev</code>åï¼Œç‚¹å¼€ç”Ÿæˆçš„é“¾æ¥å³å¯æŸ¥çœ‹</p>
<img src="/assets/image-20250219192519483.png" alt="image-20250219192519483" style="zoom: 67%;" />
<blockquote>
<p>è‹¥è§‰å¾—æ¯æ¬¡æ‰‹åŠ¨æ‰“å¼€æµè§ˆå™¨éº»çƒ¦ï¼Œå¯ä»¥å°†<code>&quot;dev&quot;: &quot;vite&quot;</code>æ”¹ä¸º<code>&quot;dev&quot;: &quot;vite --open&quot;</code></p>
<p>æ­¤æ—¶ï¼Œæ¯æ¬¡è¾“å…¥è¿è¡Œå‘½ä»¤åå°†è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</p>
</blockquote>
<h4 id="223-å¦‚ä½•åœæ­¢è¿è¡Œ">2.2.3. å¦‚ä½•åœæ­¢è¿è¡Œ
</h4><p>åœ¨ç»ˆç«¯æŒ‰å¿«æ·é”®<code>ctrl + c</code>åœæ­¢è¿è¡Œ</p>
<h3 id="23-ä¸€ä¸ªç®€å•çš„æ•ˆæœ">2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘
</h3><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">å¹´é¾„</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showTel&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">tel</span><span class="o">:</span><span class="s1">&#39;13888888888&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;zhang-san&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">showTel</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-vue3æ ¸å¿ƒè¯­æ³•">3. Vue3æ ¸å¿ƒè¯­æ³•
</h2><h3 id="31--optionsapi-ä¸-compositionapi">3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘
</h3><ul>
<li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li>
<li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li>
</ul>
<h4 id="options-api-çš„å¼Šç«¯">Options API çš„å¼Šç«¯
</h4><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p>
<p><img src="/assets/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="/assets/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p>
<h4 id="composition-api-çš„ä¼˜åŠ¿">Composition API çš„ä¼˜åŠ¿
</h4><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p>
<p><img src="/assets/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="/assets/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p>
<blockquote>
<p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p>
</blockquote>
<h3 id="32-æ‹‰å¼€åºå¹•çš„-setup">3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘
</h3><h4 id="setup-æ¦‚è¿°">setup æ¦‚è¿°
</h4><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong><em><strong>â€</strong></em>ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†&hellip;&hellip;ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p>
<p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li>
<li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li>
<li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">å¹´é¾„</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showTel&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">tel</span> <span class="o">=</span> <span class="s1">&#39;13888888888&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;zhang-san&#39;</span> <span class="c1">//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1">//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="kd">function</span> <span class="nx">showTel</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">alert</span><span class="p">(</span><span class="nx">tel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="p">{</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">,</span><span class="nx">tel</span><span class="p">,</span><span class="nx">changeName</span><span class="p">,</span><span class="nx">changeAge</span><span class="p">,</span><span class="nx">showTel</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="setup-çš„è¿”å›å€¼">setup çš„è¿”å›å€¼
</h4><ul>
<li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨**ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚**</li>
<li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">setup</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">()=&gt;</span> <span class="s1">&#39;ä½ å¥½å•Šï¼&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="setup-ä¸-options-api-çš„å…³ç³»">setup ä¸ Options API çš„å…³ç³»
</h4><ul>
<li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>&hellip;&hellip;ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li>
<li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>&hellip;&hellip;ï¼‰ã€‚</li>
<li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li>
</ul>
<h4 id="setup-è¯­æ³•ç³–">setup è¯­æ³•ç³–
</h4><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changAge&#34;</span><span class="p">&gt;</span><span class="na">å¹´é¾„</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showTel&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³–</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="c1">//undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">tel</span> <span class="o">=</span> <span class="s1">&#39;13888888888&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;æå››&#39;</span><span class="c1">//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1">//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">showTel</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="nx">tel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p>
<ol>
<li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></li>
<li>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">VueSetupExtend</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-vue-setup-extend&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span> <span class="nx">VueSetupExtend</span><span class="p">()</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li>
</ol>
<h3 id="33-ref-åˆ›å»ºåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®">3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘
</h3><ul>
<li>**ä½œç”¨ï¼š**å®šä¹‰å“åº”å¼å˜é‡ã€‚</li>
<li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li>
<li>**è¿”å›å€¼ï¼š**ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li>
<li><strong>æ³¨æ„ç‚¹ï¼š</strong>
<ul>
<li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li>
<li>å¯¹äº<code>let name = ref('å¼ ä¸‰')</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">å¹´é¾„</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showTel&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">tel</span> <span class="o">=</span> <span class="s1">&#39;13888888888&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">name</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;æå››&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// name = ref(&#39;zhang-san&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">age</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">age</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">showTel</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="nx">tel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34-reactive-åˆ›å»ºå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®">3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘
</h3><ul>
<li><strong>ä½œç”¨ï¼š<strong>å®šä¹‰ä¸€ä¸ª</strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li>
<li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li>
<li>**è¿”å›å€¼ï¼š**ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li>
<li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±½è½¦ä¿¡æ¯</span><span class="err">ï¼š</span><span class="nx">ä¸€å°</span><span class="p">{{</span> <span class="nx">car</span><span class="p">.</span><span class="nx">brand</span> <span class="p">}}</span><span class="nx">æ±½è½¦</span><span class="err">ï¼Œ</span><span class="nx">ä»·å€¼</span><span class="p">{{</span> <span class="nx">car</span><span class="p">.</span><span class="nx">price</span> <span class="p">}}</span><span class="nx">ä¸‡</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ¸¸æˆåˆ—è¡¨</span><span class="err">ï¼š</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c">&lt;!--</span> <span class="nx">åœ¨keyå‰é¢åŠ </span><span class="o">:</span><span class="nx">æ‰èƒ½å°†</span><span class="s2">&#34;&#34;</span><span class="nx">å†…çš„å†…å®¹è¯†åˆ«ä¸ºå˜é‡</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c">&lt;!--</span> <span class="o">:</span><span class="nx">å…¶å®æ˜¯v</span><span class="o">-</span><span class="nx">bind</span><span class="o">:</span><span class="nx">çš„ç®€å†™</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æµ‹è¯•</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">d</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeCarPrice&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ±½è½¦ä»·æ ¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeFirstGame&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;test&#34;</span><span class="p">&gt;</span><span class="na">æµ‹è¯•</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">reactive</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span> <span class="nx">brand</span><span class="o">:</span> <span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mi">100</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">games</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa01&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;è‹±é›„è”ç›Ÿ&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa02&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ç‹è€…è£è€€&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa03&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;åŸç¥&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">d</span><span class="o">:</span><span class="mi">666</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">changeCarPrice</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">car</span><span class="p">.</span><span class="nx">price</span> <span class="o">+=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">changeFirstGame</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">games</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;æµæ˜Ÿè´è¶å‰‘&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="mi">999</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="35-ref-åˆ›å»ºå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®">3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘
</h3><ul>
<li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li>
<li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±½è½¦ä¿¡æ¯</span><span class="err">ï¼š</span><span class="nx">ä¸€å°</span><span class="p">{{</span> <span class="nx">car</span><span class="p">.</span><span class="nx">brand</span> <span class="p">}}</span><span class="nx">æ±½è½¦</span><span class="err">ï¼Œ</span><span class="nx">ä»·å€¼</span><span class="p">{{</span> <span class="nx">car</span><span class="p">.</span><span class="nx">price</span> <span class="p">}}</span><span class="nx">ä¸‡</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ¸¸æˆåˆ—è¡¨</span><span class="err">ï¼š</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æµ‹è¯•</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">d</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeCarPrice&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ±½è½¦ä»·æ ¼</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeFirstGame&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;test&#34;</span><span class="p">&gt;</span><span class="na">æµ‹è¯•</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">({</span> <span class="nx">brand</span><span class="o">:</span> <span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mi">100</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">games</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa01&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;è‹±é›„è”ç›Ÿ&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa02&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ç‹è€…è£è€€&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ahsgdyfa03&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;åŸç¥&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">d</span><span class="o">:</span><span class="mi">666</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">car</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">changeCarPrice</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">car</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">price</span> <span class="o">+=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">changeFirstGame</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">games</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;æµæ˜Ÿè´è¶å‰‘&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">obj</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="mi">999</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="36-ref-å¯¹æ¯”-reactive">3.6. ã€ref å¯¹æ¯” reactiveã€‘
</h3><p>å®è§‚è§’åº¦çœ‹ï¼š</p>
<blockquote>
<ol>
<li>
<p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p>
</li>
<li>
<p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p>
</li>
</ol>
</blockquote>
<ul>
<li>åŒºåˆ«ï¼š</li>
</ul>
<blockquote>
<ol>
<li>
<p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>Vue - Official</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p>
<img src="/assets/image-20250223210254796.png" alt="image-20250223210254796" style="zoom:50%;" /> 
</li>
<li>
<p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p>
<img src="/assets/image-20250223211333335.png" alt="image-20250223211333335" style="zoom: 33%;" />
</li>
</ol>
</blockquote>
<ul>
<li>ä½¿ç”¨åŸåˆ™ï¼š</li>
</ul>
<blockquote>
<ol>
<li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li>
<li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li>
<li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li>
</ol>
</blockquote>
<h3 id="37-torefs-ä¸-toref">3.7. ã€toRefs ä¸ toRefã€‘
</h3><ul>
<li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li>
<li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li>
<li>è¯­æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">age</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ€§åˆ«</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">person</span><span class="p">.</span><span class="nx">gender</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeGender&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ€§åˆ«</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">toRefs</span><span class="p">,</span><span class="nx">toRef</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">,</span> <span class="nx">gender</span><span class="o">:</span><span class="s1">&#39;ç”·&#39;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">  <span class="c1">// é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// ä¸ä½¿ç”¨toRefsç›´æ¥è§£æ„ï¼Œå±æ€§ä¼šä¸¢å¤±å“åº”å¼çš„èƒ½åŠ›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="p">{</span><span class="nx">name</span><span class="p">,</span><span class="nx">gender</span><span class="p">}</span> <span class="o">=</span>  <span class="nx">toRefs</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ³¨ï¼šæ­¤æ—¶ä¿®æ”¹nameå’Œgenderæ—¶ï¼Œperson.nameå’Œperson.genderä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼ï¼ï¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="c1">// é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">toRef</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="s1">&#39;~&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeGender</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">gender</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;å¥³&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="38-computed">3.8. ã€computedã€‘
</h3><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p>
<img src="/assets/computed.gif" style="zoom:20%;" />  
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">v</span><span class="o">-</span><span class="nx">modelæ˜¯åŒå‘ç»‘å®š</span><span class="err">ï¼Œ</span><span class="nx">v</span><span class="o">-</span><span class="nx">bind</span><span class="o">:</span><span class="nx">æ˜¯å•å‘ç»‘å®š</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">åŒå‘ç»‘å®šå</span><span class="err">ï¼Œ</span><span class="nx">æ”¹å˜inputä¸­çš„å†…å®¹æ—¶</span><span class="err">ï¼Œ</span><span class="nx">è¿™ä¸ªå˜é‡çš„å€¼ä¹Ÿä¼šè¢«ä¿®æ”¹</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">å§“</span><span class="err">ï¼š</span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;firstName&#34;</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">å</span><span class="err">ï¼š</span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;lastName&#34;</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">å…¨å</span><span class="err">ï¼š</span><span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{{</span><span class="nx">fullName</span><span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeFullName&#34;</span><span class="p">&gt;</span><span class="na">å…¨åæ”¹ä¸º</span><span class="err">ï¼š</span><span class="na">li</span><span class="nt">-si</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">computed</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;zhang&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">lastName</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;san&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="cm">/* let fullName = computed(()=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="cm">    return firstName.value + &#39;-&#39; + lastName.value
</span></span></span><span class="line"><span class="cl"><span class="cm">  }) */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">fullName</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯»å–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">get</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">firstName</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">lastName</span><span class="p">.</span><span class="nx">value</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¿®æ”¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">set</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æœ‰äººä¿®æ”¹äº†fullName&#39;</span><span class="p">,</span><span class="nx">val</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">firstName</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="nx">lastName</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ä¹Ÿå¯ä»¥ç”¨è§£æ„æ•°ç»„ï¼š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// const [str1, str2] = val.split(&#39;-&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// lastname.value = str1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// firstname.value = str2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeFullName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ­¤æ—¶ä¸æ˜¯ç›´æ¥ä¿®æ”¹fullName.valueçš„å€¼ï¼Œè€Œæ˜¯æŠŠ&#39;li-si&#39;ä¼ ç»™fullNameçš„setæ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// æ‰€ä»¥æ­¤æ—¶ï¼Œset(val)ä¸­çš„valå°±æ˜¯&#39;li-si&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fullName</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;li-si&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="39watch">3.9.ã€watchã€‘
</h3><ul>
<li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li>
<li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š</li>
</ul>
<blockquote>
<ol>
<li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li>
<li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li>
<li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li>
<li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li>
</ol>
</blockquote>
<p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<h4 id="-æƒ…å†µä¸€">* æƒ…å†µä¸€
</h4><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">æƒ…å†µä¸€</span><span class="err">ï¼š</span><span class="nx">ç›‘è§†</span><span class="err">ã€</span><span class="nx">ref</span><span class="err">ã€‘</span><span class="nx">å®šä¹‰çš„</span><span class="err">ã€</span><span class="nx">åŸºæœ¬ç±»å‹</span><span class="err">ã€‘</span><span class="nx">æ•°æ®</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">sum</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeSum&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘sum</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeSum</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">stopWatch</span> <span class="o">=</span> <span class="nx">watch</span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sumå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// æ–°å€¼å¤§äºç­‰äº10æ—¶åœæ­¢ç›‘è§†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">stopWatch</span><span class="p">()</span>  <span class="c1">// å‡½æ•°åä¸å˜é‡åä¸€è‡´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="-æƒ…å†µäºŒ">* æƒ…å†µäºŒ
</h4><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>
<p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
</li>
<li>
<p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p>
</li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">æƒ…å†µäºŒ</span><span class="err">ï¼š</span><span class="nx">ç›‘è§†</span><span class="err">ã€</span><span class="nx">ref</span><span class="err">ã€‘</span><span class="nx">å®šä¹‰çš„</span><span class="err">ã€</span><span class="nx">å¯¹è±¡ç±»å‹</span><span class="err">ã€‘</span><span class="nx">æ•°æ®</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changePerson&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ•´ä¸ªäºº</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span><span class="mi">18</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span> <span class="o">+=</span> <span class="s1">&#39;~&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changePerson</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;æå››&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">90</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* 
</span></span></span><span class="line"><span class="cl"><span class="cm">    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†
</span></span></span><span class="line"><span class="cl"><span class="cm">    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="cm">    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ
</span></span></span><span class="line"><span class="cl"><span class="cm">    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ 
</span></span></span><span class="line"><span class="cl"><span class="cm">  */</span>
</span></span><span class="line"><span class="cl">  <span class="nx">watch</span><span class="p">(</span><span class="nx">person</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;personå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},{</span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="--æƒ…å†µä¸‰">*  æƒ…å†µä¸‰
</h4><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">æƒ…å†µä¸‰</span><span class="err">ï¼š</span><span class="nx">ç›‘è§†</span><span class="err">ã€</span><span class="nx">reactive</span><span class="err">ã€‘</span><span class="nx">å®šä¹‰çš„</span><span class="err">ã€</span><span class="nx">å¯¹è±¡ç±»å‹</span><span class="err">ã€‘</span><span class="nx">æ•°æ®</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changePerson&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ•´ä¸ªäºº</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æµ‹è¯•</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;test&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹obj.a.b.c</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span><span class="mi">18</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">b</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="o">:</span><span class="mi">666</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">+=</span> <span class="s1">&#39;~&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changePerson</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">person</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;æå››&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">80</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">888</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">watch</span><span class="p">(</span><span class="nx">person</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;personå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">watch</span><span class="p">(</span><span class="nx">obj</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Objå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="-æƒ…å†µå››">* æƒ…å†µå››
</h4><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li>
<li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li>
</ol>
<p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">æƒ…å†µå››</span><span class="err">ï¼š</span><span class="nx">ç›‘è§†</span><span class="err">ã€</span><span class="nx">ref</span><span class="err">ã€‘</span><span class="nx">æˆ–</span><span class="err">ã€</span><span class="nx">reactive</span><span class="err">ã€‘</span><span class="nx">å®šä¹‰çš„</span><span class="err">ã€</span><span class="nx">å¯¹è±¡ç±»å‹</span><span class="err">ã€‘</span><span class="nx">æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±½è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c1</span> <span class="p">}}</span><span class="err">ã€</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c2</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeC1&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬ä¸€å°è½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeC2&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬äºŒå°è½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeCar&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ•´ä¸ªè½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">car</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c1</span><span class="o">:</span><span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c2</span><span class="o">:</span><span class="s1">&#39;å®é©¬&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">+=</span> <span class="s1">&#39;~&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeC1</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c1</span> <span class="o">=</span> <span class="s1">&#39;å¥¥è¿ª&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeC2</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c2</span> <span class="o">=</span> <span class="s1">&#39;å¤§ä¼—&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeCar</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span> <span class="o">=</span> <span class="p">{</span><span class="nx">c1</span><span class="o">:</span><span class="s1">&#39;é›…è¿ª&#39;</span><span class="p">,</span><span class="nx">c2</span><span class="o">:</span><span class="s1">&#39;çˆ±ç›&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// () =&gt; { return person.name } ç®€å†™ä¸º () =&gt; person.name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="cm">/* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(&#39;person.nameå˜åŒ–äº†&#39;,newValue,oldValue)
</span></span></span><span class="line"><span class="cl"><span class="cm">  }) */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// ç›´æ¥å†™ person.car åªèƒ½ç›‘è§†å¯¹è±¡å†…çš„å±æ€§å˜åŒ–ï¼Œæ— æ³•ç›‘è§†æ•´ä¸ªå¯¹è±¡(å³å¯¹è±¡çš„åœ°å€)çš„å˜åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// å†™ () =&gt; person.car åªèƒ½ç›‘è§†æ•´ä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Œæ— æ³•ç›‘è§†å¯¹è±¡å†…å±æ€§çš„å˜åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// å†™ () =&gt; person.car æ—¶ï¼Œåœ¨åé¢åŠ ä¸€ä¸ª{ deep: true } å°±å¯ä»¥åŒæ—¶ç›‘è§†ä¸¤è€…çš„å˜åŒ–äº†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">watch</span><span class="p">(()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">,(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person.carå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},{</span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="-æƒ…å†µäº”">* æƒ…å†µäº”
</h4><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">æƒ…å†µäº”</span><span class="err">ï¼š</span><span class="nx">ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å§“å</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±½è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c1</span> <span class="p">}}</span><span class="err">ã€</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c2</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeC1&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬ä¸€å°è½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeC2&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹ç¬¬äºŒå°è½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeCar&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ•´ä¸ªè½¦</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">car</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c1</span><span class="o">:</span><span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">c2</span><span class="o">:</span><span class="s1">&#39;å®é©¬&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeName</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">+=</span> <span class="s1">&#39;~&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeAge</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeC1</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c1</span> <span class="o">=</span> <span class="s1">&#39;å¥¥è¿ª&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeC2</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">c2</span> <span class="o">=</span> <span class="s1">&#39;å¤§ä¼—&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeCar</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">person</span><span class="p">.</span><span class="nx">car</span> <span class="o">=</span> <span class="p">{</span><span class="nx">c1</span><span class="o">:</span><span class="s1">&#39;é›…è¿ª&#39;</span><span class="p">,</span><span class="nx">c2</span><span class="o">:</span><span class="s1">&#39;çˆ±ç›&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">watch</span><span class="p">([()=&gt;</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">person</span><span class="p">.</span><span class="nx">car</span><span class="p">],(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;person.carå˜åŒ–äº†&#39;</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},{</span><span class="nx">deep</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="310-watcheffect">3.10. ã€watchEffectã€‘
</h3><ul>
<li>
<p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p>
</li>
<li>
<p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p>
<blockquote>
<ol>
<li>
<p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p>
</li>
<li>
<p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p>
</li>
<li>
<p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p>
</li>
</ol>
</blockquote>
</li>
<li>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">éœ€æ±‚</span><span class="err">ï¼š</span><span class="nx">æ°´æ¸©è¾¾åˆ°50</span><span class="err">â„ƒï¼Œ</span><span class="nx">æˆ–æ°´ä½è¾¾åˆ°20cm</span><span class="err">ï¼Œ</span><span class="nx">åˆ™è”ç³»æœåŠ¡å™¨</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;demo&#34;</span><span class="p">&gt;</span><span class="nx">æ°´æ¸©</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">temp</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ°´ä½</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">height</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changePrice&#34;</span><span class="p">&gt;</span><span class="na">æ°´æ¸©</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeSum&#34;</span><span class="p">&gt;</span><span class="na">æ°´ä½</span><span class="err">+</span><span class="na">10</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">watch</span><span class="p">,</span><span class="nx">watchEffect</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changePrice</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">temp</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">changeSum</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">height</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">watch</span><span class="p">([</span><span class="nx">temp</span><span class="p">,</span><span class="nx">height</span><span class="p">],(</span><span class="nx">value</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">[</span><span class="nx">newTemp</span><span class="p">,</span><span class="nx">newHeight</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="nx">newTemp</span> <span class="o">&gt;=</span> <span class="mi">50</span> <span class="o">||</span> <span class="nx">newHeight</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;è”ç³»æœåŠ¡å™¨&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç”¨watchEffectå®ç°ï¼Œä¸ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">stopWtach</span> <span class="o">=</span> <span class="nx">watchEffect</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="nx">temp</span><span class="p">.</span><span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">50</span> <span class="o">||</span> <span class="nx">height</span><span class="p">.</span><span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;demo&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">innerText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;è”ç³»æœåŠ¡å™¨&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="nx">temp</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="mi">100</span> <span class="o">||</span> <span class="nx">height</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="mi">50</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æ¸…ç†äº†&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">stopWtach</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="311-æ ‡ç­¾çš„-ref-å±æ€§">3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘
</h3><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p>
<blockquote>
<ul>
<li>
<p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p>
</li>
</ul>
</blockquote>
<p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;title1&#34;</span><span class="p">&gt;</span><span class="nx">å°šç¡…è°·</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;title2&#34;</span><span class="p">&gt;</span><span class="nx">å‰ç«¯</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;title3&#34;</span><span class="p">&gt;</span><span class="nx">Vue</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;inpt&#34;</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showLog&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æ‰“å°å†…å®¹</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">title1</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">title2</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">title3</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">showLog</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// é€šè¿‡idè·å–å…ƒç´ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;title1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å°å†…å®¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">t1</span> <span class="nx">as</span> <span class="nx">HTMLElement</span><span class="p">).</span><span class="nx">innerText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((&lt;</span><span class="nt">HTMLElement</span><span class="p">&gt;</span><span class="nx">t1</span><span class="p">).</span><span class="nx">innerText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">t1</span><span class="o">?</span><span class="p">.</span><span class="nx">innerText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">		<span class="cm">/************************************/</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">    <span class="c1">// é€šè¿‡refè·å–å…ƒç´ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title1</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title2</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">title3</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">çˆ¶ç»„ä»¶App</span><span class="p">.</span><span class="nx">vue</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!--</span> <span class="nx">ç»™å­ç»„ä»¶ç»‘å®šref</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">Person</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;ren&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;test&#34;</span><span class="p">&gt;</span><span class="na">æµ‹è¯•</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">Person</span> <span class="nx">from</span> <span class="s1">&#39;./components/Person.vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åˆ›å»ºä¸€ä¸ªrefå¯¹è±¡æ¥å­˜å‚¨å­ç»„ä»¶çš„å¼•ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">ren</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ren</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ren</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">å­ç»„ä»¶Person</span><span class="p">.</span><span class="nx">vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">defineExpose</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/****************************/</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/****************************/</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨ï¼Œåªæœ‰è¿™æ ·å¤–éƒ¨æ‰èƒ½æŸ¥çœ‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">defineExpose</span><span class="p">({</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="312-props">3.12. ã€propsã€‘
</h3><blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">PersonInter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nx">id</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nx">name</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nx">age</span><span class="o">:</span><span class="nx">number</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="nx">type</span> <span class="nx">Persons</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">PersonInter</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="c">&lt;!--</span> <span class="nx">å€¼çš„å‰é¢åŠ </span><span class="o">:</span><span class="nx">å</span><span class="err">ï¼Œ</span><span class="nx">ç¼–è¯‘å™¨å°±ä¼šæŠŠè¿™ä¸ªå€¼å½“è¡¨è¾¾å¼å¤„ç†</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="c">&lt;!--</span> <span class="nx">æ³¨</span><span class="err">ï¼š</span><span class="nx">refå‰é¢æ— éœ€åŠ </span><span class="o">:</span><span class="err">ï¼Œ</span><span class="nx">ç¼–è¯‘å™¨é»˜è®¤å°±ä¼šå½“è¡¨è¾¾å¼å¤„ç†</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">Person</span> <span class="nt">:list</span><span class="o">=</span><span class="s">&#34;persons&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Person</span> <span class="nx">from</span> <span class="s1">&#39;./components/Person.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">type</span> <span class="nx">Persons</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./types&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ•ˆæœåŒlet persons:Persons = reactive(...)ï¼Œä¸è¿‡æ¨èä¸‹é¢çš„å†™æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">persons</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">&lt;</span><span class="nt">Persons</span><span class="p">&gt;([</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;e98219e12&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;e98219e13&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;æå››&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">19</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;e98219e14&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;ç‹äº”&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">20</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Vue" data-lang="Vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;item in list&#34; :key=&#34;item.id&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span><span class="na">item.name</span><span class="p">}}</span><span class="err">--</span><span class="p">{{</span><span class="na">item.age</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineProps</span><span class="p">,</span> <span class="nx">withDefaults</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// @ é»˜è®¤è¡¨ç¤ºsrcç›®å½•ï¼Œå¯ä»¥åœ¨ tsconfig.json ä¸­è®¾ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">type</span> <span class="nx">PersonInter</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@/types&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶
</span></span></span><span class="line"><span class="cl"><span class="c1">// ä¼šæŠŠæ•°ç»„å†…çš„æ‰€æœ‰æ•°æ®è½¬åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ—¶å€™å°±æ˜¯props.å±æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1">// const props = defineProps([&#39;list&#39;])
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1">// defineProps&lt;{list:Persons}&gt;()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1">// ?:å°±æ˜¯å¯ä¼ å¯ä¸ä¼ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">props</span> <span class="o">=</span> <span class="nx">withDefaults</span><span class="p">(</span><span class="nx">defineProps</span><span class="o">&lt;</span><span class="p">{</span><span class="nx">list</span><span class="o">?:</span><span class="nx">Persons</span><span class="p">}</span><span class="o">&gt;</span><span class="p">(),{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// å¿…é¡»å†™æˆå‡½æ•°è¿”å›å€¼çš„å½¢å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">list</span><span class="o">:</span><span class="p">()=&gt;[{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asdasg01&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å°çŒªä½©å¥‡&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">}]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h3 id="313-ç”Ÿå‘½å‘¨æœŸ">3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘
</h3><ul>
<li>
<p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p>
</li>
<li>
<p>è§„å¾‹ï¼š</p>
<blockquote>
<p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p>
</blockquote>
</li>
<li>
<p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p>
<blockquote>
<p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p>
<p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p>
<p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p>
<p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p>
</blockquote>
</li>
<li>
<p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p>
<blockquote>
<p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p>
<p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p>
<p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p>
<p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p>
</blockquote>
</li>
<li>
<p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p>
</li>
<li>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">sum</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeSum&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘sum</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!--</span> <span class="na">vue3å†™æ³•</span> <span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Person&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">ref</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onBeforeMount</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onMounted</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onBeforeUpdate</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onUpdated</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onBeforeUnmount</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">onUnmounted</span> 
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">changeSum</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç”Ÿå‘½å‘¨æœŸé’©å­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">onBeforeMount</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æŒ‚è½½ä¹‹å‰&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onMounted</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æŒ‚è½½å®Œæ¯•&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onBeforeUpdate</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æ›´æ–°ä¹‹å‰&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onUpdated</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æ›´æ–°å®Œæ¯•&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onBeforeUnmount</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;å¸è½½ä¹‹å‰&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onUnmounted</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;å¸è½½å®Œæ¯•&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="314-è‡ªå®šä¹‰hook">3.14. ã€è‡ªå®šä¹‰hookã€‘
</h3><ul>
<li>
<p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p>
</li>
<li>
<p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p>
</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<img src="/assets/image-20250227223103545.png" alt="image-20250227223103545" style="zoom:67%;" />
<ul>
<li>
<p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">,</span><span class="nx">onMounted</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å°†æ‰€æœ‰scriptå†…å®¹åŒ…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">decrement</span> <span class="o">=</span> <span class="p">()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">-=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onMounted</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">increment</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//å‘å¤–éƒ¨æš´éœ²æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="p">{</span><span class="nx">sum</span><span class="p">,</span><span class="nx">increment</span><span class="p">,</span><span class="nx">decrement</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>		
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">onMounted</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span><span class="p">,{</span><span class="nx">AxiosError</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å°†æ‰€æœ‰scriptå†…å®¹åŒ…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">dogList</span> <span class="o">=</span> <span class="nx">reactive</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">([])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">getDog</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å‘è¯·æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kd">let</span> <span class="p">{</span><span class="nx">data</span><span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://dog.ceo/api/breed/pembroke/./assets/random&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ç»´æŠ¤æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">dogList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¤„ç†é”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">const</span> <span class="nx">err</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">AxiosError</span><span class="o">&gt;</span><span class="nx">error</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æŒ‚è½½é’©å­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">onMounted</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">getDog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//å‘å¤–éƒ¨æš´éœ²æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="p">{</span><span class="nx">dogList</span><span class="p">,</span><span class="nx">getDog</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">sum</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;increment&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;decrement&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘</span><span class="nt">-1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;(u,index) in dogList.urlList&#34; :key=&#34;index&#34; :src=&#34;(u as string)&#34;</span><span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">v-show</span><span class="o">=</span><span class="s">&#34;dogList.isLoading&#34;</span><span class="p">&gt;</span><span class="na">åŠ è½½ä¸­......</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;getDog&#34;</span><span class="p">&gt;</span><span class="na">å†æ¥ä¸€åªç‹—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;App&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">useSum</span> <span class="nx">from</span> <span class="s1">&#39;./hooks/useSum&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">useDog</span> <span class="nx">from</span> <span class="s1">&#39;./hooks/useDog&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// è¿›è¡Œè§£æ„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="p">{</span><span class="nx">sum</span><span class="p">,</span><span class="nx">increment</span><span class="p">,</span><span class="nx">decrement</span><span class="p">}</span> <span class="o">=</span> <span class="nx">useSum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="p">{</span><span class="nx">dogList</span><span class="p">,</span><span class="nx">getDog</span><span class="p">}</span> <span class="o">=</span> <span class="nx">useDog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="4-è·¯ç”±">4. è·¯ç”±
</h2><h3 id="41-å¯¹è·¯ç”±çš„ç†è§£">4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘
</h3><img src="/assets/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> 
<h3 id="42-åŸºæœ¬åˆ‡æ¢æ•ˆæœ">4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘
</h3><ul>
<li>
<p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p>å®‰è£…å‘½ä»¤<code>npm i vue-router</code></p>
</li>
<li>
<p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createRouter</span><span class="p">,</span><span class="nx">createWebHistory</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Home</span> <span class="nx">from</span> <span class="s1">&#39;@/pages/Home.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">News</span> <span class="nx">from</span> <span class="s1">&#39;@/pages/News.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">About</span> <span class="nx">from</span> <span class="s1">&#39;@/pages/About.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="nx">history</span><span class="o">:</span><span class="nx">createWebHistory</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">	<span class="nx">routes</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">component</span><span class="o">:</span><span class="nx">Home</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/about&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">component</span><span class="o">:</span><span class="nx">About</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ul>
<li>
<p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s1">&#39;./router/index&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨è·¯ç”±å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½æ•´ä¸ªåº”ç”¨åˆ°appå®¹å™¨ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ul>
<li>
<p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">Vueè·¯ç”±æµ‹è¯•</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">å¯¼èˆªåŒº</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;navigate&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c">&lt;!--</span> <span class="nx">active</span><span class="o">-</span><span class="nx">classä¼šè‡ªåŠ¨æ£€æµ‹</span><span class="err">ï¼Œ</span><span class="nx">å½“åˆ‡æ¢åˆ°å¯¹åº”é¡µé¢æ—¶è‡ªåŠ¨æ¿€æ´»</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/home&#34;</span> <span class="na">active</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">active</span><span class="err">&#34;</span><span class="p">&gt;</span><span class="nx">é¦–é¡µ</span><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/news&#34;</span> <span class="na">active</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">active</span><span class="err">&#34;</span><span class="p">&gt;</span><span class="nx">æ–°é—»</span><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/about&#34;</span> <span class="na">active</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">active</span><span class="err">&#34;</span><span class="p">&gt;</span><span class="nx">å…³äº</span><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">å±•ç¤ºåŒº</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main-content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterView</span><span class="p">&gt;&lt;/</span><span class="nt">RouterView</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">setup</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">RouterLink</span><span class="p">,</span><span class="nx">RouterView</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>  
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="43-ä¸¤ä¸ªæ³¨æ„ç‚¹">4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘
</h3><blockquote>
<ol>
<li>
<p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p>
<p>è·¯ç”±ç»„ä»¶ï¼šé è·¯ç”±çš„è§„åˆ™æ¸²æŸ“å‡ºæ¥çš„</p>
<p>ä¸€èˆ¬ç»„ä»¶ï¼šäº²æ‰‹å†™æ ‡ç­¾å‡ºæ¥çš„</p>
</li>
<li>
<p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p>
</li>
</ol>
</blockquote>
<h3 id="44è·¯ç”±å™¨å·¥ä½œæ¨¡å¼">4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘
</h3><ol>
<li>
<p><code>history</code>æ¨¡å¼</p>
<blockquote>
<p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p>
<p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="nx">history</span><span class="o">:</span><span class="nx">createWebHistory</span><span class="p">(),</span> <span class="c1">//historyæ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cm">/******/</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p><code>hash</code>æ¨¡å¼</p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p>
<p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="nx">history</span><span class="o">:</span><span class="nx">createWebHashHistory</span><span class="p">(),</span> <span class="c1">//hashæ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="cm">/******/</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
</ol>
<h3 id="45-toçš„ä¸¤ç§å†™æ³•">4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ç¬¬ä¸€ç§</span><span class="err">ï¼š</span><span class="nx">toçš„å­—ç¬¦ä¸²å†™æ³•</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">active</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">active</span><span class="err">&#34;</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/home&#34;</span><span class="p">&gt;</span><span class="nx">ä¸»é¡µ</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ç¬¬äºŒç§</span><span class="err">ï¼š</span><span class="nx">toçš„å¯¹è±¡å†™æ³•</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">active</span><span class="nt">-class</span><span class="err">=&#34;</span><span class="na">active</span><span class="err">&#34;</span> <span class="nt">:to</span><span class="o">=</span><span class="s">&#34;{path:&#39;/home&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">Home</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="46-å‘½åè·¯ç”±">4.6. ã€å‘½åè·¯ç”±ã€‘
</h3><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p>
<p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">routes</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;zhuye&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">component</span><span class="o">:</span><span class="nx">Home</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;xinwen&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/news&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">component</span><span class="o">:</span><span class="nx">News</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;guanyu&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/about&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">component</span><span class="o">:</span><span class="nx">About</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è·³è½¬è·¯ç”±ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">ç®€åŒ–å‰</span><span class="err">ï¼š</span><span class="nx">éœ€è¦å†™å®Œæ•´çš„è·¯å¾„</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å­—ç¬¦ä¸²å†™æ³•</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/news/detail&#34;</span><span class="p">&gt;</span><span class="nx">è·³è½¬</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span><span class="nx">ç®€åŒ–å</span><span class="err">ï¼š</span><span class="nx">ç›´æ¥é€šè¿‡åå­—è·³è½¬</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="nt">:to</span><span class="o">=</span><span class="s">&#34;{name:&#39;guanyu&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">è·³è½¬</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="47-åµŒå¥—è·¯ç”±">4.7. ã€åµŒå¥—è·¯ç”±ã€‘
</h3><ol>
<li>
<p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p>
</li>
<li>
<p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">history</span>:<span class="kt">createWebHistory</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">	<span class="nx">routes</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;zhuye&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">component</span>:<span class="kt">Home</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;xinwen&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/news&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">component</span>:<span class="kt">News</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">children</span><span class="o">:</span><span class="p">[</span>  <span class="c1">// å­é›†è·¯ç”±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;xiang&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">					<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span>  <span class="c1">// å­é›†ä¸ç”¨å†™/
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>					<span class="nx">component</span>:<span class="kt">Detail</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">]</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;guanyu&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/about&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">component</span>:<span class="kt">About</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/news/detail&#34;</span><span class="p">&gt;</span><span class="nx">xxxx</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">æˆ–</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="nt">:to</span><span class="o">=</span><span class="s">&#34;{path:&#39;/news/detail&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">xxxx</span><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news-list&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;news in newsList&#34; :key=&#34;news.id&#34; :to=&#34;{path:&#39;/news/detail&#39;}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{{</span><span class="na">news.name</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news-detail&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterView</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="48-è·¯ç”±ä¼ å‚">4.8. ã€è·¯ç”±ä¼ å‚ã€‘
</h3><h4 id="queryå‚æ•°">queryå‚æ•°
</h4><ol>
<li>
<p>ä¼ é€’å‚æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">è·³è½¬å¹¶æºå¸¦queryå‚æ•°</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å­—ç¬¦ä¸²å†™æ³•</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">è·³è½¬</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">router-link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">è·³è½¬å¹¶æºå¸¦queryå‚æ•°</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å¯¹è±¡å†™æ³•</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">RouterLink</span> 
</span></span><span class="line"><span class="cl">  <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{
</span></span></span><span class="line"><span class="cl"><span class="s">    //name:&#39;xiang&#39;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬
</span></span></span><span class="line"><span class="cl"><span class="s">    path:&#39;/news/detail&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">    query:{
</span></span></span><span class="line"><span class="cl"><span class="s">      id:news.id,
</span></span></span><span class="line"><span class="cl"><span class="s">      title:news.title,
</span></span></span><span class="line"><span class="cl"><span class="s">      content:news.content
</span></span></span><span class="line"><span class="cl"><span class="s">    }
</span></span></span><span class="line"><span class="cl"><span class="s">  }&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span><span class="nx">news</span><span class="p">.</span><span class="nx">title</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¥æ”¶å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">useRoute</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ‰“å°queryå‚æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p><img src="/assets/image-20250302151507104.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302151507104"
	
	
></p>
<h4 id="paramså‚æ•°">paramså‚æ•°
</h4><ol>
<li>
<p>ä¼ é€’å‚æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">è·³è½¬å¹¶æºå¸¦paramså‚æ•°</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å­—ç¬¦ä¸²å†™æ³•</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="nt">:to</span><span class="o">=</span><span class="s">&#34;`/news/detail/001/æ–°é—»001/å†…å®¹001`&#34;</span><span class="p">&gt;{{</span><span class="nx">news</span><span class="p">.</span><span class="nx">title</span><span class="p">}}&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">è·³è½¬å¹¶æºå¸¦paramså‚æ•°</span><span class="err">ï¼ˆ</span><span class="nx">toçš„å¯¹è±¡å†™æ³•</span><span class="err">ï¼‰</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">RouterLink</span> 
</span></span><span class="line"><span class="cl">  <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{
</span></span></span><span class="line"><span class="cl"><span class="s">    name:&#39;xiang&#39;, // ç”¨nameè·³è½¬ï¼Œä¸èƒ½ç”¨path
</span></span></span><span class="line"><span class="cl"><span class="s">    params:{
</span></span></span><span class="line"><span class="cl"><span class="s">      id:news.id,
</span></span></span><span class="line"><span class="cl"><span class="s">      title:news.title,
</span></span></span><span class="line"><span class="cl"><span class="s">      content:news.title
</span></span></span><span class="line"><span class="cl"><span class="s">    }
</span></span></span><span class="line"><span class="cl"><span class="s">  }&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span><span class="nx">news</span><span class="p">.</span><span class="nx">title</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¥æ”¶å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">useRoute</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ‰“å°paramså‚æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p><img src="/assets/image-20250302170358160.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302170358160"
	
	
></p>
<blockquote>
<p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p>
<p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p>
</blockquote>
<h3 id="49-è·¯ç”±çš„propsé…ç½®">4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘
</h3><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p>
<p>å¤‡æ³¨ï¼šåœ¨<code>src/router/index.ts</code>ä¸­ç¼–å†™</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;xiang&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">path</span><span class="o">:</span><span class="s1">&#39;detail/:id/:title/:content&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">component</span><span class="o">:</span><span class="nx">Detail</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// props:{a:1,b:2,c:3}, 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// props:true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="c1">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">props</span><span class="p">(</span><span class="nx">route</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">route</span><span class="p">.</span><span class="nx">query</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/assets/image-20250302172545977.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302172545977"
	
	
></p>
<h3 id="410--replaceå±æ€§">4.10. ã€ replaceå±æ€§ã€‘
</h3><ol>
<li>
<p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p>
</li>
<li>
<p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p>
<ul>
<li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li>
<li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li>
</ul>
</li>
<li>
<p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">RouterLink</span> <span class="na">replace</span> <span class="na">.......</span><span class="p">&gt;</span><span class="nx">News</span><span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>pushå’ŒreplaceåŒºåˆ«æ¼”ç¤ºï¼š</p>
<p><img src="/assets/PixPin_2025-03-02_17-35-39.gif"
	
	
	
	loading="lazy"
	
		alt="PixPin_2025-03-02_17-35-39"
	
	
></p>
<h3 id="411-ç¼–ç¨‹å¼å¯¼èˆª">4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘
</h3><p>ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆªï¼šè„±ç¦»<RouterLink>å®ç°è·¯ç”±è·³è½¬</p>
<p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>route</code>å’Œ<code>router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRoute</span><span class="p">,</span><span class="nx">useRouter</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">useRoute</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">parmas</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">push</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">replace</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½å3ç§’è‡ªåŠ¨è·³è½¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">onMounted(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">    setTimeout(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">        router.push(&#39;/news&#39;)
</span></span></span><span class="line"><span class="cl"><span class="cm">    }, 3000)
</span></span></span><span class="line"><span class="cl"><span class="cm">})
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="c1">// toçš„å†™æ³•åŒæ ·é€‚ç”¨äºrouter.push()çš„æ‹¬å·å†…
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç®€å•æ¼”ç¤ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">å¯¼èˆªåŒº</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;news in newsList&#34; :key=&#34;news.id&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;showNewsDetail(news)&#34;</span><span class="p">&gt;</span><span class="na">æŸ¥çœ‹æ–°é—»</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">RouterLink</span> 
</span></span><span class="line"><span class="cl">          <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{
</span></span></span><span class="line"><span class="cl"><span class="s">            name:&#39;xiang&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">            query:{
</span></span></span><span class="line"><span class="cl"><span class="s">              id:news.id,
</span></span></span><span class="line"><span class="cl"><span class="s">              title:news.title,
</span></span></span><span class="line"><span class="cl"><span class="s">              content:news.content
</span></span></span><span class="line"><span class="cl"><span class="s">            }
</span></span></span><span class="line"><span class="cl"><span class="s">          }&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{{</span><span class="nx">news</span><span class="p">.</span><span class="nx">title</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">RouterLink</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">å±•ç¤ºåŒº</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news-content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">RouterView</span><span class="p">&gt;&lt;/</span><span class="nt">RouterView</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;News&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">RouterView</span><span class="p">,</span><span class="nx">RouterLink</span><span class="p">,</span><span class="nx">useRouter</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">newsList</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asfdtrfay01&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;å¾ˆå¥½çš„æŠ—ç™Œé£Ÿç‰©&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;è¥¿è“èŠ±&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asfdtrfay02&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;å¦‚ä½•ä¸€å¤œæš´å¯Œ&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;å­¦IT&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asfdtrfay03&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;éœ‡æƒŠï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;æ˜å¤©æ˜¯å‘¨ä¸€&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asfdtrfay04&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;å¥½æ¶ˆæ¯ï¼å¥½æ¶ˆæ¯ï¼&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;å¿«è¿‡å¹´äº†&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">interface</span> <span class="nx">NewsInter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span><span class="o">:</span><span class="nx">string</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">showNewsDetail</span><span class="p">(</span><span class="nx">news</span><span class="o">:</span><span class="nx">NewsInter</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">router</span><span class="p">.</span><span class="nx">replace</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;xiang&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">query</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">id</span><span class="o">:</span><span class="nx">news</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="o">:</span><span class="nx">news</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span><span class="nx">news</span><span class="p">.</span><span class="nx">content</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="412-é‡å®šå‘">4.12. ã€é‡å®šå‘ã€‘
</h3><ol>
<li>
<p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p>
</li>
<li>
<p>å…·ä½“ç¼–ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">redirect</span><span class="o">:</span><span class="s1">&#39;/about&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="5-pinia">5. pinia
</h2><h3 id="51å‡†å¤‡ä¸€ä¸ªæ•ˆæœ">5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘
</h3><img src="/assets/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> 
<p><code>src/App.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">Count</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">LoveTalk</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">Count</span> <span class="nx">from</span> <span class="s1">&#39;./components/Count.vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">LoveTalk</span> <span class="nx">from</span> <span class="s1">&#39;./components/LoveTalk.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>src/components/Count.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">sum</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">select</span> <span class="na">v</span><span class="nt">-model</span><span class="na">.number</span><span class="err">=&#34;</span><span class="na">n</span><span class="err">&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;1&#34;</span><span class="p">&gt;</span><span class="mi">1</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span><span class="mi">2</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;3&#34;</span><span class="p">&gt;</span><span class="mi">3</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;add&#34;</span><span class="p">&gt;</span><span class="na">åŠ </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;minus&#34;</span><span class="p">&gt;</span><span class="na">å‡</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// å½“å‰æ±‚å’Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// ç”¨æˆ·é€‰æ‹©çš„æ•°å­—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">add</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">value</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">minus</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">-=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">value</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">count</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">skyblue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">padding</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">select</span><span class="p">,</span><span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">height</span><span class="o">:</span> <span class="mi">25</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>src/components/LoveTalk.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;talk&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;getLoveTalk&#34;</span><span class="p">&gt;</span><span class="na">è·å–ä¸€å¥åœŸå‘³æƒ…è¯</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;talk in talkList&#34; :key=&#34;talk.id&#34;</span><span class="p">&gt;{{</span><span class="na">talk.title</span><span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;LoveTalk&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span><span class="p">;</span>  <span class="c1">// npm i axios
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">import</span> <span class="p">{</span><span class="nx">nanoid</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;nanoid&#39;</span>  <span class="c1">// npm i nanoid
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">talkList</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;ftrfasdf01&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;ä»Šå¤©ä½ æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;ftrfasdf02&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä»Šå¤©æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;ftrfasdf03&#39;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">async</span> <span class="kd">function</span> <span class="nx">getLoveTalk</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ä»await axiosä¸­è§£æ„å‡º dataï¼Œå†ä» data ä¸­è§£æ„å‡º contentï¼Œå†å°† content é‡å‘½åä¸º title
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span><span class="p">{</span><span class="nx">content</span><span class="o">:</span><span class="nx">title</span><span class="p">}}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://api.uomg.com/api/rand.qinghua?format=json&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// title çš„ key å’Œ value ç›¸åŒï¼Œå¯ç®€å†™
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="nx">nanoid</span><span class="p">(),</span><span class="nx">title</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ”¾åˆ°æ•°ç»„ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">talkList</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">talk</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">padding</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="52æ­å»º-pinia-ç¯å¢ƒ">5.2ã€æ­å»º pinia ç¯å¢ƒã€‘
</h3><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p>
<p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createApp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createPinia</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* åˆ›å»ºpinia */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pinia</span> <span class="o">=</span> <span class="nx">createPinia</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* ä½¿ç”¨æ’ä»¶ */</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">pinia</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p>
<img src="./assets/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" />
<h3 id="53å­˜å‚¨è¯»å–æ•°æ®">5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘
</h3><ol>
<li>
<p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p>
</li>
<li>
<p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p>
</li>
<li>
<p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="c1">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">defineStore</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useCountStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åŠ¨ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">actions</span><span class="o">:</span><span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// çŠ¶æ€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">state</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">sum</span>:<span class="kt">6</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è®¡ç®—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">getters</span><span class="o">:</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">defineStore</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useTalkStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åŠ¨ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">actions</span><span class="o">:</span><span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// çŠ¶æ€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">state</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">talkList</span><span class="o">:</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;yuysada01&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">     	<span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;yuysada02&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;yuysada03&#39;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s1">&#39;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è®¡ç®—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">getters</span><span class="o">:</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">sumStore</span><span class="p">.</span><span class="nx">sum</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¼•å…¥å¯¹åº”çš„useXxxxxStore	
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">import</span> <span class="p">{</span><span class="nx">useSumStore</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@/store/sum&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">sumStore</span> <span class="o">=</span> <span class="nx">useSumStore</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æŸ¥çœ‹sumStoreæ˜¯ä»€ä¹ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sumStore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// reactive å¯¹è±¡ä¸­çš„ ref å¯¹è±¡çš„valueå€¼å¯ä»¥ç›´æ¥è°ƒç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sumStore</span><span class="p">.</span><span class="nx">sum</span><span class="p">)</span>  <span class="c1">// æ­¤æ—¶çš„sumä¸éœ€è¦.value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/assets/image-20250303200553737.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303200553737"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;talk in talkStore.talkList&#34; :key=&#34;talk.id&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{{</span> <span class="na">talk.content</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span><span class="nx">useTalkStore</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@/store/talk&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">talkStore</span> <span class="o">=</span> <span class="nx">useTalkStore</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="54ä¿®æ”¹æ•°æ®ä¸‰ç§æ–¹å¼">5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)
</h3><ol>
<li>
<p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="nx">countStore</span><span class="p">.</span><span class="nx">sum</span> <span class="o">=</span> <span class="mi">666</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="nx">countStore</span><span class="p">.</span><span class="nx">$patch</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sum</span>:<span class="kt">999</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">school</span><span class="o">:</span><span class="s1">&#39;atguigu&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">defineStore</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useCountStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/*************/</span>
</span></span><span class="line"><span class="cl">  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//åŠ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">increment</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>  <span class="c1">// æ‰“å°ç»“æœè§ä¸‹å›¾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// this æ˜¯å½“å‰çš„storeï¼Œå³useCountStore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sum</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//æ“ä½œcountStoreä¸­çš„sum
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//å‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">decrement</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="nx">number</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sum</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">sum</span> <span class="o">-=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/*************/</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹å›¾ä¸º<code>console.log(this)</code>çš„ç»“æœ</p>
<p><img src="/assets/image-20250303204203262.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303204203262"
	
	
></p>
<p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨countStore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">countStore</span> <span class="o">=</span> <span class="nx">useCountStore</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è°ƒç”¨å¯¹åº”action
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">countStore</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="55storetorefs">5.5.ã€storeToRefsã€‘
</h3><ul>
<li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li>
<li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å½“å‰æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span><span class="nx">sum</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Count&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">useCountStore</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@/store/count&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* å¼•å…¥storeToRefs */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">storeToRefs</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/* å¾—åˆ°countStore */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">countStore</span> <span class="o">=</span> <span class="nx">useCountStore</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// storeToRefsåªä¼šå…³æ³¨storeä¸­çš„æ•°æ®ï¼Œä¸ä¼šå¯¹æ–¹æ³•è¿›è¡ŒrefåŒ…è£¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="p">{</span><span class="nx">sum</span><span class="p">}</span> <span class="o">=</span> <span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">countStore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>toRefsä¸storeToRefså¯¹æ¯”ï¼š</p>
<p><img src="/assets/image-20250303205905641.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303205905641"
	
	
></p>
<h3 id="56getters">5.6.ã€gettersã€‘
</h3><ol>
<li>
<p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p>
</li>
<li>
<p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">defineStore</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useCountStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åŠ¨ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">actions</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/************/</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// çŠ¶æ€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">state</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">sum</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">school</span><span class="o">:</span><span class="s1">&#39;atguigu&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è®¡ç®—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">getters</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* bigSum(state) {
</span></span></span><span class="line"><span class="cl"><span class="cm">        return state.sum * 10
</span></span></span><span class="line"><span class="cl"><span class="cm">    } ä¸‹è¡Œä¸ºç®€å†™å½¢å¼ */</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// gettersæœ‰ä¸€ä¸ªåä¸ºbigSumçš„å±æ€§ï¼Œå±æ€§å€¼ä¸ºç®­å¤´å‡½æ•°state =&gt; state.sum * 10ï¼Œå‡½æ•°è¿”å›å€¼æ˜¯numberç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">bigSum</span><span class="o">:</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="o">:</span><span class="nx">number</span> <span class="p">=&gt;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">*</span><span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">upperSchool</span><span class="p">()</span><span class="o">:</span><span class="nx">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">school</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span><span class="nx">increment</span><span class="p">,</span><span class="nx">decrement</span><span class="p">}</span> <span class="o">=</span> <span class="nx">countStore</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="p">{</span><span class="nx">sum</span><span class="p">,</span><span class="nx">school</span><span class="p">,</span><span class="nx">bigSum</span><span class="p">,</span><span class="nx">upperSchool</span><span class="p">}</span> <span class="o">=</span> <span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">countStore</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="57subscribe">5.7.ã€$subscribeã€‘
</h3><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="c1">// mutateä¸ºæœ¬æ¬¡ä¿®æ”¹çš„ä¿¡æ¯ï¼Œstateä¸ºæ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">talkStore</span><span class="p">.</span><span class="nx">$subscribe</span><span class="p">((</span><span class="nx">mutate</span><span class="p">,</span><span class="nx">state</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;LoveTalk&#39;</span><span class="p">,</span><span class="nx">mutate</span><span class="p">,</span><span class="nx">state</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// localStorage.setItemï¼šåœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">talkList</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/assets/image-20250303212916386.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303212916386"
	
	
></p>
<h3 id="58-storeç»„åˆå¼å†™æ³•">5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineStore</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;pinia&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">nanoid</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;nanoid&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useTalkStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">,()</span><span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// talkListå°±æ˜¯state
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">talkList</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// JSON.parseåªèƒ½å¯¹å­—ç¬¦ä¸²ä½¿ç”¨ï¼Œæ‰€ä»¥å°†localStorage.getItem(&#39;talkList&#39;)æ–­è¨€ä¸ºå­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// å½“æœ¬åœ°æµè§ˆå™¨æ•°æ®ä¸ºç©ºæ—¶ï¼ŒJSON.parse(localStorage.getItem(&#39;talkList&#39;) as string)ä¸ºnullï¼Œè€ƒè™‘åˆ°nullçš„æƒ…å†µï¼Œè¦ç”¨æ¡ä»¶æˆ–æ¥è®¾ç½®å‰è€…ä¸ºnullæ—¶çš„å¤„ç†æ–¹å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;talkList&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="kt">string</span><span class="p">)</span> <span class="o">||</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// getATalkå‡½æ•°ç›¸å½“äºaction
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">getATalk</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span><span class="p">{</span><span class="nx">content</span>:<span class="kt">title</span><span class="p">}}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;https://api.uomg.com/api/rand.qinghua?format=json&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">id</span>:<span class="kt">nanoid</span><span class="p">(),</span><span class="nx">title</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ”¾åˆ°æ•°ç»„ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">talkList</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span><span class="nx">talkList</span><span class="p">,</span><span class="nx">getATalk</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6-ç»„ä»¶é€šä¿¡">6. ç»„ä»¶é€šä¿¡
</h2><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li>
</ul>
<ul>
<li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li>
<li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li>
<li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li>
<li><code>$children</code>è¢«ç æ‰äº†ã€‚</li>
</ul>
<p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p>
<img src="/assets/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> 
<h3 id="61-props">6.1. ã€propsã€‘
</h3><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p>
<ul>
<li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li>
<li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li>
</ul>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="err">ï¼Œ</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">æˆ‘çš„è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">car</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">å„¿å­ç»™çš„ç©å…·</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">toy</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">Child</span> <span class="nt">:car</span><span class="o">=</span><span class="s">&#34;car&#34;</span> <span class="nt">:getToy</span><span class="o">=</span><span class="s">&#34;getToy&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">Child</span> <span class="nx">from</span> <span class="s1">&#39;./Child.vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kr">const</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;å¥”é©°&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kr">const</span> <span class="nx">toy</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">function</span> <span class="nx">getToy</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="nx">string</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">toy</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­ç»„ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">æˆ‘çš„ç©å…·</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">toy</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»™æˆ‘çš„è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">car</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;getToy(toy)&#34;</span><span class="p">&gt;</span><span class="na">ç©å…·ç»™çˆ¶äº²</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">const</span> <span class="nx">toy</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;å¥¥ç‰¹æ›¼&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="nx">defineProps</span><span class="p">([</span><span class="s1">&#39;car&#39;</span><span class="p">,</span><span class="s1">&#39;getToy&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="62-è‡ªå®šä¹‰äº‹ä»¶">6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘
</h3><ol>
<li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ =&gt; çˆ¶ã€‚</strong></li>
<li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li>
</ol>
<ul>
<li>åŸç”Ÿäº‹ä»¶ï¼š
<ul>
<li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li>
<li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li>
</ul>
</li>
<li>è‡ªå®šä¹‰äº‹ä»¶ï¼š
<ul>
<li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li>
<li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong ></li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Child</span> <span class="err">@</span><span class="na">send-toy</span><span class="o">=</span><span class="s">&#34;toy = $event&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--åŸç”Ÿäº‹ä»¶ä¸­çš„$eventè¡¨ç¤ºäº‹ä»¶å¯¹è±¡ --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$eventè¡¨ç¤ºè‡ªå®šä¹‰äº‹ä»¶ä¼ é€’çš„å‚æ•° --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;toy = $event&#34;</span><span class="p">&gt;</span>æµ‹è¯•<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;send-toy&#39;</span><span class="p">,</span> <span class="nx">ä¼ ç»™$eventçš„å…·ä½“æ•°æ®</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¡ˆä¾‹æ¼”ç¤º</p>
<p><img src="/assets/image-20250304194956556.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304194956556"
	
	
></p>
</li>
</ol>
<h3 id="63-mitt">6.3. ã€mittã€‘
</h3><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p>
<p>å®‰è£…<code>mitt</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i mitt
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// å¼•å…¥mitt 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">mitt</span> <span class="nx">from</span> <span class="s2">&#34;mitt&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è°ƒç”¨mittå¾—åˆ°emitterï¼Œemitterèƒ½ç»‘å®šäº‹ä»¶ã€è§¦å‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="nx">mitt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">  // ç»‘å®šäº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="cm">  emitter.on(&#39;abc&#39;,(value)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(&#39;abcäº‹ä»¶è¢«è§¦å‘&#39;,value)
</span></span></span><span class="line"><span class="cl"><span class="cm">  })
</span></span></span><span class="line"><span class="cl"><span class="cm">  emitter.on(&#39;xyz&#39;,(value)=&gt;{
</span></span></span><span class="line"><span class="cl"><span class="cm">    console.log(&#39;xyzäº‹ä»¶è¢«è§¦å‘&#39;,value)
</span></span></span><span class="line"><span class="cl"><span class="cm">  })
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">  setInterval(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">    // è§¦å‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="cm">    emitter.emit(&#39;abc&#39;,666)
</span></span></span><span class="line"><span class="cl"><span class="cm">    emitter.emit(&#39;xyz&#39;,777)
</span></span></span><span class="line"><span class="cl"><span class="cm">  }, 1000);
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">  setTimeout(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="cm">  	// è§£ç»‘abcäº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="cm">  	emitter.off(&#39;abc&#39;)
</span></span></span><span class="line"><span class="cl"><span class="cm">    // æ¸…ç†äº‹ä»¶ï¼Œä¸€æ¬¡æ€§è§£ç»‘æ‰€æœ‰äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="cm">    emitter.all.clear()
</span></span></span><span class="line"><span class="cl"><span class="cm">  }, 3000); 
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åˆ›å»ºå¹¶æš´éœ²mitt
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="nx">emitter</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">emitter</span> <span class="kr">from</span> <span class="s2">&#34;@/utils/emitter&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">onUnmounted</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ç»‘å®šäº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;send-toy&#39;</span><span class="p">,(</span><span class="nx">value</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;send-toyäº‹ä»¶è¢«è§¦å‘&#39;</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åœ¨ç»„ä»¶å¸è½½æ—¶è§£ç»‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">onUnmounted</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è§£ç»‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">emitter</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;send-toy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">emitter</span> <span class="nx">from</span> <span class="s2">&#34;@/utils/emitter&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">sendToy</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è§¦å‘äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;send-toy&#39;</span><span class="p">,</span><span class="nx">toy</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p>
<h3 id="64v-model">6.4.ã€v-modelã€‘
</h3><ol>
<li>
<p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p>
</li>
<li>
<p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ä½¿ç”¨v</span><span class="o">-</span><span class="nx">modelæŒ‡ä»¤</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;userName&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!--</span> <span class="nt">v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç </span><span class="p"> </span><span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">input</span> 
</span></span><span class="line"><span class="cl">  <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="nt">:value</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="nt">@input</span><span class="s">=&#34;userName =(&lt;HTMLInputElement&gt;$event.target).value&#34;</span><span class="p">
</span></span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v</span><span class="o">-</span><span class="nx">modelæŒ‡ä»¤</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">AtguiguInput</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;userName&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;!--</span> <span class="na">ç»„ä»¶æ ‡ç­¾ä¸Šv</span><span class="nt">-modelçš„æœ¬è´¨</span> <span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">AtguiguInput</span> <span class="nt">:modelValue</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="err">@</span><span class="na">update</span><span class="o">:</span><span class="na">model</span><span class="nt">-value</span><span class="err">=&#34;</span><span class="na">userName </span><span class="o">=</span> <span class="err">$</span><span class="na">event</span><span class="err">&#34;</span><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;box&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span><span class="nx">å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§</span><span class="err">ï¼Œ</span><span class="nx">ç›®çš„æ˜¯</span><span class="err">ï¼š</span><span class="nx">ä¸ºäº†å‘ˆç°æ•°æ®</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="c">&lt;!--</span><span class="nx">ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶</span><span class="err">ï¼Œ</span><span class="nx">è§¦å‘inputäº‹ä»¶æ—¶</span><span class="err">ï¼Œ</span><span class="nx">è¿›è€Œè§¦å‘update</span><span class="o">:</span><span class="nx">model</span><span class="o">-</span><span class="nx">valueäº‹ä»¶</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> 
</span></span><span class="line"><span class="cl">       <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> 
</span></span><span class="line"><span class="cl">       <span class="nt">:value</span><span class="o">=</span><span class="s">&#34;modelValue&#34;</span> 
</span></span><span class="line"><span class="cl">       <span class="nt">@input</span><span class="s">=&#34;emit(&#39;update:model-value&#39;,$event.target.value)&#34;</span><span class="p">
</span></span></span><span class="line"><span class="cl"><span class="p"></span>    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;AtguiguInput&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ¥æ”¶props
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">defineProps</span><span class="p">([</span><span class="s1">&#39;modelValue&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">emit</span> <span class="o">=</span> <span class="nx">defineEmits</span><span class="p">([</span><span class="s1">&#39;update:model-value&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ä¹Ÿå¯ä»¥æ›´æ¢value</span><span class="err">ï¼Œ</span><span class="nx">ä¾‹å¦‚æ”¹æˆabc</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">AtguiguInput</span> <span class="na">v</span><span class="nt">-model:abc</span><span class="o">=</span><span class="s">&#34;userName&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--</span> <span class="nx">ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">AtguiguInput</span> <span class="nt">:abc</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="err">@</span><span class="na">update</span><span class="o">:</span><span class="na">abc</span><span class="o">=</span><span class="s">&#34;userName = $event&#34;</span><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;box&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> 
</span></span><span class="line"><span class="cl">       <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> 
</span></span><span class="line"><span class="cl">       <span class="nt">:value</span><span class="o">=</span><span class="s">&#34;abc&#34;</span> 
</span></span><span class="line"><span class="cl">       <span class="nt">@input</span><span class="s">=&#34;emit(&#39;update:abc&#39;,$event.target.value)&#34;</span><span class="p">
</span></span></span><span class="line"><span class="cl"><span class="p"></span>    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;AtguiguInput&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ¥æ”¶props
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">defineProps</span><span class="p">([</span><span class="s1">&#39;abc&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">emit</span> <span class="o">=</span> <span class="nx">defineEmits</span><span class="p">([</span><span class="s1">&#39;update:abc&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">AtguiguInput</span> <span class="na">v</span><span class="nt">-model:abc</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="na">v</span><span class="nt">-model:xyz</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="65attrs-">6.5.ã€$attrs ã€‘
</h3><ol>
<li>
<p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p>
</li>
<li>
<p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p>
</blockquote>
</li>
</ol>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span> <span class="nx">v</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s2">&#34;{x:100,y:200}&#34;</span> <span class="nx">ç›¸å½“äº</span> <span class="o">:</span><span class="nx">x</span><span class="o">=</span><span class="s1">&#39;100&#39;</span> <span class="o">:</span><span class="nx">y</span><span class="o">=</span><span class="s1">&#39;200&#39;</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">Child</span> <span class="nt">:a</span><span class="o">=</span><span class="s">&#34;a&#34;</span> <span class="nt">:b</span><span class="o">=</span><span class="s">&#34;b&#34;</span> <span class="nt">:c</span><span class="o">=</span><span class="s">&#34;c&#34;</span> <span class="nt">:d</span><span class="o">=</span><span class="s">&#34;d&#34;</span> <span class="nt">v-bind</span><span class="o">=</span><span class="s">&#34;{x:100,y:200}&#34; :updateA=&#34;updateA&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">Child</span> <span class="nx">from</span> <span class="s1">&#39;./Child.vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">updateA</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">a</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--</span> <span class="nx">æŠŠçˆ¶ç»„ä»¶ä¼ å…¥çš„æ•°æ®å†ä¼ ç»™å­ç»„ä»¶</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">GrandChild</span> <span class="nt">v-bind</span><span class="o">=</span><span class="s">&#34;$attrs&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">GrandChild</span> <span class="nx">from</span> <span class="s1">&#39;./GrandChild.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­™ç»„ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;grand-child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­™ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">a</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">a</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">b</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">b</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">c</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">c</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">d</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">d</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">x</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">x</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">y</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">y</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;updateA(666)&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘æ›´æ–°A</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;GrandChild&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">defineProps</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;updateA&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="66-refsparent">6.6. ã€$refsã€$parentã€‘
</h3><ol>
<li>
<p>æ¦‚è¿°ï¼š</p>
<ul>
<li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li>
<li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li>
</ul>
</li>
<li>
<p>åŸç†å¦‚ä¸‹ï¼š</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>å±æ€§</th>
          <th>è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>$refs</code></td>
          <td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td>
      </tr>
      <tr>
          <td><code>$parent</code></td>
          <td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td>
      </tr>
  </tbody>
</table></div>
</li>
</ol>
<p>$refs ç¤ºä¾‹ï¼š</p>
<p><code>Father.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;getAllChild($refs)&#34;</span><span class="p">&gt;</span><span class="na">è®©æ‰€æœ‰å­©å­çš„ä¹¦å˜å¤š</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">Child1</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;c1&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">Child2</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;c2&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">Child1</span> <span class="nx">from</span> <span class="s1">&#39;./Child1.vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">Child2</span> <span class="nx">from</span> <span class="s1">&#39;./Child2.vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">c2</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// refs:{[key:string]:any} è¡¨ç¤ºï¼Œrefsæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å±æ€§ï¼Œå±æ€§å­˜å‚¨çš„ç±»å‹å¯èƒ½æ˜¯ä»»ä½•ç±»å‹ï¼ˆå®åœ¨æä¸æ‡‚ç›´æ¥ç”¨anyï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">function</span> <span class="nx">getAllChild</span><span class="p">(</span><span class="nx">refs</span><span class="o">:</span><span class="p">{[</span><span class="nx">key</span><span class="o">:</span><span class="nx">string</span><span class="p">]</span><span class="o">:</span><span class="nx">any</span><span class="p">}){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">refs</span><span class="p">)</span>  <span class="c1">// æ‰“å°ç»“æœè§ä¸‹å›¾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">refs</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="nx">refs</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">book</span> <span class="o">+=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Child1.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;child1&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­ç»„ä»¶1</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">ç©å…·</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">toy</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">ä¹¦ç±</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">book</span> <span class="p">}}</span> <span class="nx">æœ¬</span><span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Child1&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">let</span> <span class="nx">toy</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;å¥¥ç‰¹æ›¼&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">book</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// æŠŠæ•°æ®äº¤ç»™å¤–éƒ¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">defineExpose</span><span class="p">({</span><span class="nx">toy</span><span class="p">,</span><span class="nx">book</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Child2.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;child2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­ç»„ä»¶2</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">ç”µè„‘</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">computer</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">ä¹¦ç±</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">book</span> <span class="p">}}</span> <span class="nx">æœ¬</span><span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Child2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="kd">let</span> <span class="nx">computer</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;è”æƒ³&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="kd">let</span> <span class="nx">book</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// æŠŠæ•°æ®äº¤ç»™å¤–éƒ¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">defineExpose</span><span class="p">({</span><span class="nx">computer</span><span class="p">,</span><span class="nx">book</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/assets/image-20250305171225984.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305171225984"
	
	
></p>
<p>$parent ç¤ºä¾‹ï¼š</p>
<p><code>Father.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">æˆ¿äº§</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">house</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">Child</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">Child</span> <span class="nx">from</span> <span class="s1">&#39;./Child.vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">let</span> <span class="nx">house</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å‘å¤–éƒ¨æä¾›æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">defineExpose</span><span class="p">({</span><span class="nx">house</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Child.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">å­ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;minusHouse($parent)&#34;</span><span class="p">&gt;</span><span class="na">å¹²æ‰çˆ¶äº²çš„ä¸€å¥—æˆ¿äº§</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">function</span> <span class="nx">minusHouse</span><span class="p">(</span><span class="nx">parent</span><span class="o">:</span><span class="nx">any</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parent</span><span class="p">)</span>  <span class="c1">// æ‰“å°ç»“æœè§ä¸‹å›¾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// parentæ˜¯å“åº”å¼å¯¹è±¡ï¼Œæ‰€ä»¥è°ƒç”¨å…¶ä¸­çš„å“åº”å¼å±æ€§houseä¸ç”¨.value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">parent</span><span class="p">.</span><span class="nx">house</span> <span class="o">-=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/assets/image-20250305172147967.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305172147967"
	
	
></p>
<h3 id="67-provideinject">6.7. ã€provideã€injectã€‘
</h3><ol>
<li>
<p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p>
</li>
<li>
<p>å…·ä½“ä½¿ç”¨ï¼š</p>
<ul>
<li>
<p>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</p>
<p><code>provide(æ•°æ®åç§°,æ•°æ®çš„å€¼)</code></p>
</li>
<li>
<p>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</p>
<p><code>inject(æ¥æ”¶çš„å±æ€§å[,è¯¥å±æ€§çš„é»˜è®¤å€¼])</code></p>
</li>
</ul>
</li>
<li>
<p>å…·ä½“ç¼–ç ï¼š</p>
<p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">èµ„äº§</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">money</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">æ±½è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">car</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;money += 1&#34;</span><span class="p">&gt;</span><span class="na">èµ„äº§</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;car.price += 1&#34;</span><span class="p">&gt;</span><span class="na">æ±½è½¦ä»·æ ¼</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Child</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">Child</span> <span class="nx">from</span> <span class="s1">&#39;./Child.vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">provide</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">money</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">brand</span><span class="o">:</span><span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">price</span><span class="o">:</span><span class="mi">100</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">updateMoney</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="nx">number</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">money</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‘åä»£æä¾›æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;moneyContext&#39;</span><span class="p">,{</span><span class="nx">money</span><span class="p">,</span><span class="nx">updateMoney</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;car&#39;</span><span class="p">,</span><span class="nx">car</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p>
</blockquote>
<p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;grand-child&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">æˆ‘æ˜¯å­™ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">èµ„äº§</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">money</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span><span class="nx">æ±½è½¦</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">car</span> <span class="p">}}&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;updateMoney(6)&#34;</span><span class="p">&gt;</span><span class="na">ç‚¹æˆ‘</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;GrandChild&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">inject</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ³¨å…¥æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// å†™ä¸€ä¸ªé»˜è®¤å€¼å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒmoneyContextå†…æœ‰moneyå’ŒupdateMoney
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="p">{</span><span class="nx">money</span><span class="p">,</span><span class="nx">updateMoney</span><span class="p">}</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;moneyContext&#39;</span><span class="p">,{</span><span class="nx">money</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">updateMoney</span><span class="o">:</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="nx">number</span><span class="p">)=&gt;{}})</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;car&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="68-pinia">6.8. ã€piniaã€‘
</h3><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p>
<h3 id="69-slot">6.9. ã€slotã€‘
</h3><h4 id="1-é»˜è®¤æ’æ§½">1. é»˜è®¤æ’æ§½
</h4><p><img src="http://49.232.112.44/./assets/default_slot.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="nx">çˆ¶ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Category</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Category</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="na">å­ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span> <span class="nx">title</span> <span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!--</span> <span class="nx">é»˜è®¤æ’æ§½</span><span class="err">ï¼Œ</span><span class="nx">ä¼šæŠŠçˆ¶ç»„ä»¶ä½¿ç”¨è¯¥ç»„ä»¶æ—¶</span><span class="err">ï¼Œ</span><span class="nx">å†™åœ¨ç»„ä»¶ä¸­é—´çš„å†…å®¹æ”¾è¿›é»˜è®¤æ’æ§½ä¸­</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="c">&lt;!--</span> <span class="nx">å†…éƒ¨å¯ä»¥å†™é»˜è®¤å†…å®¹</span><span class="err">ï¼Œ</span><span class="nx">çˆ¶ç»„ä»¶ä¸ä¼ å†…å®¹æ—¶</span><span class="err">ï¼Œ</span><span class="nx">å°±ä¼šæ˜¾ç¤ºé»˜è®¤å†…å®¹</span><span class="err">ï¼›</span><span class="nx">çˆ¶ç»„ä»¶ä¼ å€¼æ—¶å°±ä¸æ˜¾ç¤º</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œæ•´ï¼š</p>
<p><code>Father.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">çˆ¶ç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Category</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;çƒ­é—¨æ¸¸æˆåˆ—è¡¨&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Category</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Category</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;ä»Šæ—¥ç¾é£ŸåŸå¸‚&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">img</span> <span class="nt">:src</span><span class="o">=</span><span class="s">&#34;imgUrl&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Category</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Category</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;ä»Šæ—¥å½±è§†æ¨è&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">video</span> <span class="nt">:src</span><span class="o">=</span><span class="s">&#34;videoUrl&#34;</span> <span class="na">controls</span><span class="p">&gt;&lt;/</span><span class="nt">video</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Category</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Father&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">Category</span> <span class="nx">from</span> <span class="s1">&#39;./Category.vue&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span><span class="nx">reactive</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">games</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgytdfats01&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;è‹±é›„è”ç›Ÿ&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgytdfats02&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;ç‹è€…å†œè¯&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgytdfats03&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;çº¢è‰²è­¦æˆ’&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgytdfats04&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;æ–—ç½—å¤§é™†&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">imgUrl</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;https://z1.ax1x.com/2023/11/19/piNxLo4.jpg&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">videoUrl</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">father</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">rgb</span><span class="p">(</span><span class="mi">165</span><span class="p">,</span> <span class="mi">164</span><span class="p">,</span> <span class="mi">164</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">padding</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="o">:</span> <span class="nx">space</span><span class="o">-</span><span class="nx">evenly</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">img</span><span class="p">,</span><span class="nx">video</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Category.vue</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;category&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{{</span><span class="nx">title</span><span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;</span><span class="nx">é»˜è®¤å†…å®¹</span><span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Category&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">defineProps</span><span class="p">([</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">category</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">skyblue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">padding</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">height</span><span class="o">:</span> <span class="mi">300</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">h2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="o">:</span> <span class="mi">800</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-å…·åæ’æ§½">2. å…·åæ’æ§½
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="nx">çˆ¶ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">		<span class="c">&lt;!--</span> <span class="nx">v</span><span class="o">-</span><span class="nx">slot</span><span class="o">:</span><span class="nx">ä¹Ÿå¯ä»¥å†™åœ¨ç»„ä»¶</span><span class="p">(</span><span class="nx">Category</span><span class="p">)</span><span class="nx">ä¸Š</span><span class="err">ï¼Œ</span><span class="nx">ä¸è¿‡ä¸å¦‚å†™åœ¨templateä¸Šçµæ´»</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Category</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">template</span> <span class="na">v</span><span class="nt">-slot</span><span class="o">:</span><span class="na">s1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="err">&lt;!--</span> <span class="err">#</span><span class="na">s2ç­‰æ•ˆäºv</span><span class="nt">-slot</span><span class="o">:</span><span class="na">s2</span> <span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">template</span> <span class="err">#</span><span class="na">s2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span><span class="nx">æ›´å¤š</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Category</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nx">å­ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{{</span> <span class="nx">title</span> <span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;s1&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;s2&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>é»˜è®¤æ’æ§½å…¶å®ä¹Ÿæœ‰åå­—ï¼Œåå­—ä¸º<code>default</code></p>
</blockquote>
<h4 id="3-ä½œç”¨åŸŸæ’æ§½">3. ä½œç”¨åŸŸæ’æ§½
</h4><ol>
<li>
<p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p>
</li>
<li>
<p>å…·ä½“ç¼–ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="nx">çˆ¶ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">	 <span class="c">&lt;!--</span> <span class="nx">ç”¨v</span><span class="o">-</span><span class="nx">slotæ¥æ”¶å­ç»„ä»¶ä¼ æ¥çš„å¯¹è±¡</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Game</span> <span class="nt">v-slot</span><span class="o">=</span><span class="s">&#34;params&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="err">&lt;!--</span> <span class="na">ä½œç”¨åŸŸæ’æ§½ä¹Ÿå¯ä»¥æœ‰åå­—</span><span class="err">ï¼Œ</span><span class="na">ä¸å†™åå­—å…¶å®åå­—å°±æ˜¯é»˜è®¤çš„default</span> <span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c">&lt;!--</span> <span class="p">&lt;</span><span class="nt">Game</span> <span class="na">v</span><span class="nt">-slot:default</span><span class="o">=</span><span class="s">&#34;params&#34;</span><span class="p">&gt;</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="c">&lt;!--</span> <span class="p">&lt;</span><span class="nt">Game</span> <span class="err">#</span><span class="na">default</span><span class="o">=</span><span class="s">&#34;params&#34;</span><span class="p">&gt;</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in params.games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Game</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="err">&lt;!--</span> <span class="na">ç›´æ¥è§£æ„å‡ºgames</span><span class="err">ï¼Œ</span><span class="na">çœå¾—æ¯æ¬¡éƒ½params.games</span> <span class="err">--</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	  <span class="c">&lt;!--</span> <span class="nx">æ•°æ®å­˜æ”¾åœ¨å­ç»„ä»¶</span><span class="err">ï¼Œ</span><span class="nx">ä½†å…·ä½“ç»“æ„æœ‰çˆ¶ç»„ä»¶å†³å®š</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">&lt;</span><span class="nt">Game</span> <span class="nt">v-slot</span><span class="o">=</span><span class="s">&#34;{games}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h3</span> <span class="nt">v-for</span><span class="o">=</span><span class="s">&#34;g in games&#34; :key=&#34;g.id&#34;</span><span class="p">&gt;{{</span> <span class="na">g.name</span> <span class="p">}}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Game</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">å­ç»„ä»¶ä¸­</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;category&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">ä»Šæ—¥æ¸¸æˆæ¦œå•</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="c">&lt;!--</span> <span class="nx">ä¼šæŠŠæ‰€æœ‰propsæ‰“åŒ…æˆä¸€ä¸ªå¯¹è±¡</span><span class="err">ï¼Œ</span><span class="nx">ä¼ ç»™çˆ¶ç»„ä»¶</span>  <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">slot</span> <span class="nt">:games</span><span class="o">=</span><span class="s">&#34;games&#34;</span> <span class="na">a</span><span class="o">=</span><span class="s">&#34;å“ˆå“ˆ&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Category&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="p">{</span><span class="nx">reactive</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">games</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgdytsa01&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;è‹±é›„è”ç›Ÿ&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgdytsa02&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;ç‹è€…è£è€€&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgdytsa03&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;çº¢è‰²è­¦æˆ’&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asgdytsa04&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;æ–—ç½—å¤§é™†&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">])</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<blockquote>
<p>ä½œç”¨åŸŸæ’æ§½ä¹Ÿå¯ä»¥æœ‰åå­—ï¼Œå¯ä¸å…·åæ’æ§½ç»“åˆ</p>
</blockquote>
<h2 id="7-å…¶å®ƒ-api">7. å…¶å®ƒ API
</h2><h3 id="71shallowref-ä¸-shallowreactive-">7.1.ã€shallowRef ä¸ shallowReactive ã€‘
</h3><h4 id="shallowref"><code>shallowRef</code>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p>
</li>
<li>
<p>ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">myVar</span> <span class="o">=</span> <span class="nx">shallowRef</span><span class="p">(</span><span class="nx">initialValue</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p>
</li>
</ol>
<p>å³åªæœ‰<code>myVar.value</code>è¿™ä¸€å±‚æ˜¯å“åº”å¼çš„ï¼Œ<code>myVar.value.xxx</code>å¼€å§‹çš„æ•°æ®å°±ä¸æ˜¯å“åº”å¼çš„äº†</p>
<h4 id="shallowreactive"><code>shallowReactive</code>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p>
</li>
<li>
<p>ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="nx">shallowReactive</span><span class="p">({</span> <span class="p">...</span> <span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p>
</li>
</ol>
<img src="/assets/image-20250306205411531.png" alt="image-20250306205411531" style="zoom:50%;" />
<h4 id="æ€»ç»“">æ€»ç»“
</h4><blockquote>
<p>é€šè¿‡ä½¿ç”¨ <a class="link" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"  target="_blank" rel="noopener"
    ><code>shallowRef()</code></a> å’Œ <a class="link" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"  target="_blank" rel="noopener"
    ><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p>
</blockquote>
<h4 id="æ³¨æ„">æ³¨æ„
</h4><p>ä¸æ˜¯å“åº”å¼ä¸ä»£è¡¨æ•°æ®ä¸å˜ï¼Œå½“é¡µé¢ä¸­æœ‰å“åº”å¼æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™äº›è¢«ä¿®æ”¹çš„éå“åº”å¼æ•°æ®ä¹Ÿä¼šè·Ÿç€å˜åŒ–</p>
<p><img src="/assets/PixPin_2025-03-06_20-59-07.gif"
	
	
	
	loading="lazy"
	
		alt="PixPin_2025-03-06_20-59-07"
	
	
></p>
<p>ä¸Šå›¾é¡µé¢ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±‚å’Œä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">sum</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">åå­—ä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">å¹´é¾„ä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">æ±½è½¦ä¸º</span><span class="err">ï¼š</span><span class="p">{{</span> <span class="nx">car</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeSum&#34;</span><span class="p">&gt;</span><span class="na">sum</span><span class="err">+</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeName&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹åå­—</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeAge&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å¹´é¾„</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changePerson&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹æ•´ä¸ªäºº</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="o">|</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeBrand&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å“ç‰Œ</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeColor&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹é¢œè‰²</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@click</span><span class="s">=&#34;changeEngine&#34;</span><span class="p">&gt;</span><span class="na">ä¿®æ”¹å‘åŠ¨æœº</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span><span class="nx">reactive</span><span class="p">,</span><span class="nx">shallowRef</span><span class="p">,</span><span class="nx">shallowReactive</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">shallowRef</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">shallowRef</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">		<span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">age</span><span class="o">:</span><span class="mi">18</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">shallowReactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">		<span class="nx">barnd</span><span class="o">:</span><span class="s1">&#39;å¥”é©°&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">options</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">color</span><span class="o">:</span><span class="s1">&#39;çº¢è‰²&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">engine</span><span class="o">:</span><span class="s1">&#39;V8&#39;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeSum</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">sum</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeName</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;æå››&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeAge</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">person</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changePerson</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">person</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;tony&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">100</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="cm">/* ****************** */</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeBrand</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">car</span><span class="p">.</span><span class="nx">barnd</span> <span class="o">=</span> <span class="s1">&#39;å®é©¬&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeColor</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">car</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;ç´«è‰²&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">function</span> <span class="nx">changeEngine</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">		<span class="nx">car</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">engine</span> <span class="o">=</span> <span class="s1">&#39;V12&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">.</span><span class="nx">app</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ddd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="nx">padding</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">margin</span><span class="o">:</span><span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="72readonly-ä¸-shallowreadonly">7.2.ã€readonly ä¸ shallowReadonlyã€‘
</h3><h4 id="readonly"><strong><code>readonly</code></strong>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p>
</li>
<li>
<p>ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">original</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span> <span class="p">...</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">readOnlyCopy</span> <span class="o">=</span> <span class="nx">readonly</span><span class="p">(</span><span class="nx">original</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li>
<li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li>
<li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li>
</ul>
</li>
</ol>
<h4 id="shallowreadonly"><strong><code>shallowReadonly</code></strong>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p>
</li>
<li>
<p>ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">original</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span> <span class="p">...</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">shallowReadOnlyCopy</span> <span class="o">=</span> <span class="nx">shallowReadonly</span><span class="p">(</span><span class="nx">original</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p>
</li>
<li>
<p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 id="73toraw-ä¸-markraw">7.3.ã€toRaw ä¸ markRawã€‘
</h3><h4 id="toraw"><code>toRaw</code>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p>
<blockquote>
<p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®/è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p>
</blockquote>
<blockquote>
<p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p>
</blockquote>
</li>
<li>
<p>å…·ä½“ç¼–ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">reactive</span><span class="p">,</span><span class="nx">toRaw</span><span class="p">,</span><span class="nx">markRaw</span><span class="p">,</span><span class="nx">isReactive</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* toRaw */</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å“åº”å¼å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;tony&#39;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="mi">18</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">// åŸå§‹å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">rawPerson</span> <span class="o">=</span> <span class="nx">toRaw</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isReactive</span><span class="p">(</span><span class="nx">person</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isReactive</span><span class="p">(</span><span class="nx">rawPerson</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<blockquote>
<p>æ³¨ï¼šä¿®æ”¹rawPersonçš„å†…å®¹æ—¶ï¼Œè™½ç„¶é¡µé¢ä¸ä¼šæ›´æ–°ï¼Œä½†åŸpersonçš„å†…å®¹ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Œç­‰åˆ°å…¶ä»–å“åº”å¼æ•°æ®æ›´æ–°æ—¶ï¼Œpersonè¢«ä¿®æ”¹çš„å†…å®¹ä¹Ÿä¼šåŒæ­¥åœ¨é¡µé¢æ›´æ–°</p>
</blockquote>
<h4 id="markraw"><code>markRaw</code>
</h4><ol>
<li>
<p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p>
</blockquote>
</li>
<li>
<p>ç¼–ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/* markRaw */</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">citys</span> <span class="o">=</span> <span class="nx">markRaw</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asdda01&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;åŒ—äº¬&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asdda02&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;ä¸Šæµ·&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asdda03&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;å¤©æ´¥&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="s1">&#39;asdda04&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;é‡åº†&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">citys2</span> <span class="o">=</span> <span class="nx">reactive</span><span class="p">(</span><span class="nx">citys</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isReactive</span><span class="p">(</span><span class="nx">citys</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isReactive</span><span class="p">(</span><span class="nx">citys2</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="74customref">7.4.ã€customRefã€‘
</h3><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p>
<p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">customRef</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(</span><span class="nx">initValue</span>:<span class="kt">string</span><span class="p">,</span><span class="nx">delay</span>:<span class="kt">number</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">customRef</span><span class="p">((</span><span class="nx">track</span><span class="p">,</span><span class="nx">trigger</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>  <span class="c1">// track-è·Ÿè¸ªï¼Œtrigger-è§¦å‘ï¼Œåº•å±‚ä»£ç è‡ªåŠ¨ä¼ é€’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">timer</span>:<span class="kt">number</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// msgè¢«è¯»å–æ—¶ï¼Œget()ä¼šè¢«è°ƒç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">get</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">track</span><span class="p">()</span> <span class="c1">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nx">initValue</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// msgè¢«ä¿®æ”¹æ—¶ï¼Œset()ä¼šè¢«è°ƒç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">set</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span>  <span class="c1">// é˜²æ­¢å¿«é€Ÿè¾“å…¥æ—¶å‡ºbug
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">initValue</span> <span class="o">=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">          <span class="nx">trigger</span><span class="p">()</span> <span class="c1">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span> 
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span><span class="nx">msg</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{{</span> <span class="nx">msg</span> <span class="p">}}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">v-model</span><span class="o">=</span><span class="s">&#34;msg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="kr">import</span> <span class="nx">useMsgRef</span> <span class="nx">from</span> <span class="s1">&#39;./useMsgRef&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// ä½¿ç”¨Vueæä¾›çš„é»˜è®¤refå®šä¹‰å“åº”å¼æ•°æ®ï¼Œæ•°æ®ä¸€å˜ï¼Œé¡µé¢å°±æ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// let msg = ref(&#39;ä½ å¥½&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// ä½¿ç”¨useMsgRefæ¥å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ä¸”æœ‰å»¶è¿Ÿæ•ˆæœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">let</span> <span class="p">{</span><span class="nx">msg</span><span class="p">}</span> <span class="o">=</span> <span class="nx">useMsgRef</span><span class="p">(</span><span class="s1">&#39;ä½ å¥½&#39;</span><span class="p">,</span><span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="8-vue3æ–°ç»„ä»¶">8. Vue3æ–°ç»„ä»¶
</h2><h3 id="81-teleport">8.1. ã€Teleportã€‘
</h3><ul>
<li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- to=&#39;&#39;ä¸­å†™çš„æ˜¯é€‰æ‹©å™¨ï¼Œå¦‚ç±»é€‰æ‹©å™¨.xxxï¼Œidé€‰æ‹©å™¨#xxxç­‰ç­‰ --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- å°†teleportåŒ…è£¹çš„å†…å®¹ä¼ é€åˆ°é¡µé¢çš„bodyä¸­ --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">teleport</span> <span class="na">to</span><span class="o">=</span><span class="s">&#39;body&#39;</span> <span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;modal&#34;</span> <span class="na">v-show</span><span class="o">=</span><span class="s">&#34;isShow&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;isShow = false&#34;</span><span class="p">&gt;</span>å…³é—­å¼¹çª—<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">teleport</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="82-suspense">8.2. ã€Suspenseã€‘
</h3><ul>
<li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
<li>ä½¿ç”¨æ­¥éª¤ï¼š
<ul>
<li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li>
<li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">æˆ‘æ˜¯Appç»„ä»¶</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="c">&lt;!--</span> <span class="nx">å¼‚æ­¥ä»»åŠ¡å®Œæˆæ—¶</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">template</span> <span class="na">v</span><span class="nt">-slot</span><span class="o">:</span><span class="na">default</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Child</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		 <span class="c">&lt;!--</span> <span class="nx">å¼‚æ­¥ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œæ—¶</span><span class="err">ï¼Œ</span><span class="nx">å› ä¸ºåœ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆå‰</span><span class="err">ï¼Œ</span><span class="nx">å­ç»„ä»¶ä¼šæ¶ˆå¤±</span><span class="err">ï¼Œ</span><span class="nx">æ‰€ä»¥å¯ä»¥å†™ç‚¹æç¤º</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">template</span> <span class="na">v</span><span class="nt">-slot</span><span class="o">:</span><span class="na">fallback</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="nx">åŠ è½½ä¸­</span><span class="p">.......&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;App&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="p">{</span> <span class="nx">defineAsyncComponent</span><span class="p">,</span><span class="nx">Suspense</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">Child</span> <span class="o">=</span> <span class="nx">defineAsyncComponent</span><span class="p">(()=&gt;</span><span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./Child.vue&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ä¸ä½¿ç”¨Suspenseæ—¶ï¼Œè‹¥å­ç»„ä»¶æœ‰å¼‚æ­¥ä»»åŠ¡ï¼Œè¯¥å­ç»„ä»¶ä¼šç›´æ¥æ¶ˆå¤±</p>
</blockquote>
<h3 id="83å…¨å±€apiè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡">8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘
</h3><ul>
<li>
<p><code>app.component</code></p>
<p>åœ¨<code>src/main.ts</code>ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Hello</span> <span class="kr">from</span> <span class="s1">&#39;./Hello.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åˆ›å»ºåº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è®©Helloç»„ä»¶æˆä¸ºå…¨å±€ç»„ä»¶ï¼Œå³ä½¿ç”¨æ—¶æ— éœ€å†å¼•å…¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span><span class="nx">Hello</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½åº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>app.config</code></p>
<p>åœ¨<code>src/main.ts</code>ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åˆ›å»ºåº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è®¾ç½®å…¨å±€å±æ€§ x ï¼Œx çš„å€¼ä¸º 99
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">99</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è‹¥åªæœ‰ä¸Šä¸€è¡Œä»£ç ï¼Œxå¯ä»¥ä½¿ç”¨ï¼Œä½†ä½¿ç”¨æ—¶ä¼šæŠ¥çº¢ï¼ŒåŠ ä¸Šä¸‹é¢çš„ä»£ç å³å¯è§£å†³æŠ¥çº¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">declare</span> <span class="nx">module</span> <span class="s1">&#39;vue&#39;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">interface</span> <span class="nx">ComponentCustomProperties</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¸Šé¢éƒ½æ˜¯å›ºå®šå†…å®¹ï¼Œæ­¤å¤„å†™è‡ªå®šä¹‰å…¨å±€å±æ€§çš„æ•°æ®ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">x</span>:<span class="kt">number</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½åº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>app.directive</code></p>
<p>åœ¨<code>src/main.ts</code>ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åˆ›å»ºåº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ³¨å†Œå…¨å±€æŒ‡ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;beauty&#39;</span><span class="p">,(</span><span class="nx">element</span><span class="p">,{</span><span class="nx">value</span><span class="p">})</span><span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">element</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">+=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">  <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½åº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨æ¼”ç¤ºï¼š</p>
<p><img src="/assets/image-20250306225454937.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306225454937"
	
	
></p>
</li>
<li>
<p><code>app.mount</code></p>
<p>æŒ‚è½½app</p>
</li>
<li>
<p><code>app.unmount</code></p>
<p>å¸è½½app</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åˆ›å»ºåº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‚è½½åº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2ç§’åå¸è½½åº”ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">app</span><span class="p">.</span><span class="nx">unmount</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>app.use</code></p>
<p>å®‰è£…æ’ä»¶</p>
<img src="/assets/image-20250306225755089.png" alt="image-20250306225755089" style="zoom:33%;" />
</li>
</ul>
<h3 id="84å…¶ä»–vue3çš„éå…¼å®¹æ€§æ”¹å˜">8.4.ã€å…¶ä»–ï¼ˆVue3çš„éå…¼å®¹æ€§æ”¹å˜ï¼‰ã€‘
</h3><ul>
<li>
<p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p>
</li>
<li>
<p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p>
</li>
<li>
<p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p>
</li>
<li>
<p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
</li>
<li>
<p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p>
</li>
<li>
<p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p>
</li>
<li>
<p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p>
<p>&hellip;&hellip;ï¼ˆè¯¦æƒ…è§å®˜ç½‘ï¼Œåœ¨Vue3è¿ç§»æŒ‡å—ä¸­ï¼‰</p>
</li>
</ul>
<h2 id="9-element-plus">9. Element Plus
</h2><h3 id="91-å®‰è£…ä¸å¯¼å…¥">9.1. å®‰è£…ä¸å¯¼å…¥
</h3><p>ElementPluså®˜ç½‘ï¼šhttps://element-plus.org/zh-CN/</p>
<p>å®‰è£…ï¼š<code>npm install element-plus --save</code></p>
<p>å®Œæ•´å¼•å…¥ï¼š</p>
<p>åœ¨<code>src/main.ts</code>ä¸­å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createApp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ•´ä½“å¯¼å…¥ ElementPlus ç»„ä»¶åº“
</span></span></span><span class="line"><span class="cl"><span class="c1">// å¯¼å…¥ElementPlusç»„ä»¶åº“çš„æ‰€æœ‰æ¨¡å—å’ŒåŠŸèƒ½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">ElementPlus</span> <span class="kr">from</span> <span class="s1">&#39;element-plus&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å¯¼å…¥ElementPlusç»„ä»¶åº“æ‰€éœ€çš„å…¨å±€CSSæ ·å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="s1">&#39;element-plus/dist/index.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨ElementPlus
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">ElementPlus</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/%E5%88%A0%E9%99%A4%E5%88%9B%E5%BB%BAvue3%E5%90%8E%E9%A1%B5%E9%9D%A2%E4%B8%8B%E6%96%B9%E7%9A%84devtools/">
        
        
            <div class="article-image">
                <img src="/p/%E5%88%A0%E9%99%A4%E5%88%9B%E5%BB%BAvue3%E5%90%8E%E9%A1%B5%E9%9D%A2%E4%B8%8B%E6%96%B9%E7%9A%84devtools/Snipaste_2025-05-25_15-11-59.60001ac046eaf442abbe3bdc961fcdb7_hu_cdcd18eb0a641947.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post åˆ é™¤åˆ›å»ºvue3åé¡µé¢ä¸‹æ–¹çš„devtools"
                        
                        data-hash="md5-YAAawEbq9EKrvjvclh/Ntw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">åˆ é™¤åˆ›å»ºvue3åé¡µé¢ä¸‹æ–¹çš„devtools</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E4%B8%BAapk%E6%96%87%E4%BB%B6/">
        
        

        <div class="article-details">
            <h2 class="article-title">å°†Vueé¡¹ç›®æ‰“åŒ…ä¸ºapkæ–‡ä»¶</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/javascript%E8%BF%9B%E9%98%B6/">
        
        

        <div class="article-details">
            <h2 class="article-title">JavaScriptè¿›é˜¶</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/javascriptapis/">
        
        

        <div class="article-details">
            <h2 class="article-title">JavaScriptAPIs</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/javascript%E5%9F%BA%E7%A1%80/">
        
        

        <div class="article-details">
            <h2 class="article-title">JavaScriptåŸºç¡€</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="IAmYuanyu/IAmYuanyu.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 ç¼˜é±¼
    </section>
    
    <section class="powerby">
        
            æœ¬ç«™äº2025å¹´3æœˆ26æ—¥å»ºç«‹ <br/>
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
